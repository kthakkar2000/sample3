<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kalindi â€” TCL 43" P6K (43P6K)</title>
<style>
  :root{
    --bg:#071226; --muted:#9fb0c4; --accent:#00e6d8; --accentWarm:#ff6b57; --txt:#e9f8ff;
    font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#041021);color:var(--txt);-webkit-font-smoothing:antialiased}
  .wrap{max-width:980px;margin:8px auto;padding:12px}

/* header centered with logo + main text */
.header-centered{display:flex;flex-direction:column;align-items:center;gap:8px;margin-bottom:14px;text-align:center}
.logo-box{width:110px;height:76px;border-radius:14px;overflow:hidden;background:#fff;padding:10px;display:flex;align-items:center;justify-content:center;box-shadow:0 16px 48px rgba(2,8,18,0.6)}
.logo-box img{width:100%;height:100%;object-fit:contain}
.brand-title{font-weight:900;font-size:18px}
.brand-sub{color:var(--muted);font-size:13px}

/* language toggle top-right small */
.lang-toggle-top{position:fixed;right:12px;top:12px;z-index:6000;display:flex;gap:8px}
.lang-btn{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;font-weight:800;touch-action:manipulation}
.lang-btn.active{background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426}

/* product card */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:14px;padding:12px;box-shadow:0 24px 60px rgba(2,8,18,0.6)}

/* title row */
.title-row{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;margin-bottom:10px}
.product-name{font-weight:900;font-size:18px}
.product-size{color:var(--muted);font-size:13px}

/* carousel (wide, landscape-first) */
.carousel{position:relative;border-radius:12px;overflow:hidden;background:#000;margin-bottom:12px}
.slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1);will-change:transform}
.slides img{width:100%;height:260px;object-fit:cover;flex-shrink:0;display:block}
@media(min-width:640px){ .slides img{height:340px} }
.dots{display:flex;gap:8px;padding:10px;justify-content:center}
.dot{width:9px;height:9px;border-radius:8px;background:rgba(255,255,255,0.06)}
.dot.active{background:linear-gradient(90deg,var(--accent),var(--accentWarm));box-shadow:0 10px 26px rgba(0,230,216,0.07)}
.nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);border-radius:10px;padding:8px;border:0;color:var(--txt);cursor:pointer;z-index:3000;touch-action:manipulation}
.nav-btn.prev{left:8px}
.nav-btn.next{right:8px}

/* centered actions (two big buttons) */
.center-actions{display:flex;gap:12px;justify-content:center;margin:10px 0 0}
.center-actions button{padding:12px 18px;border-radius:12px;border:0;cursor:pointer;font-weight:900;background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;box-shadow:0 14px 40px rgba(0,230,216,0.06);touch-action:manipulation}
.center-actions button.voice{background:linear-gradient(90deg,var(--accentWarm),#ffb085);color:#081217}

/* panel (hidden until opened) */
.panel{position:fixed;right:14px;bottom:86px;width:92vw;max-width:420px;height:62vh;background:linear-gradient(180deg,#071726,#03202b);border-radius:12px;padding:8px;box-shadow:0 28px 80px rgba(2,8,18,0.7);display:none;flex-direction:column;z-index:6500}
.panel header{display:flex;align-items:center;justify-content:space-between;padding:8px 6px;border-bottom:1px solid rgba(255,255,255,0.03)}
.panel .h-title{font-weight:800}
.panel .h-sub{font-size:12px;color:var(--muted)}
.panel .messages{flex:1;padding:10px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35;word-break:break-word}
.bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accentWarm),#ffb085);color:#081217}
.bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.03);color:var(--txt)}
.panel .composer{display:flex;gap:8px;padding:8px;border-top:1px solid rgba(255,255,255,0.03)}
.panel input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--txt);outline:none}

/* minimal footer */
footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}

@media(max-width:480px){
  .logo-box{width:86px;height:56px;padding:6px}
  .slides img{height:200px}
}
</style>
</head>
<body>
  <!-- language toggle top-right -->
  <div class="lang-toggle-top">
    <button id="langEn" class="lang-btn active">English</button>
    <button id="langGu" class="lang-btn">àª—à«àªœàª°àª¾àª¤à«€</button>
  </div>

  <div class="wrap">
    <!-- centered logo + title + subtitle -->
    <div class="header-centered">
      <div class="logo-box"><img id="logoImg" alt="Kalindi logo"></div>
      <div class="brand-title">Kalindi Tradelinks Pvt Ltd</div>
      <div class="brand-sub">Ask me â€” Product Assistant</div>
    </div>

    <!-- product card -->
    <main class="card" aria-labelledby="prodTitle">
      <div class="title-row" style="margin-bottom:10px;">
        <div>
          <div id="prodTitle" class="product-name">TCL 43" P6K 4K HDR TV â€” 43P6K</div>
          <div id="prodSize" class="product-size">43 inch (109 cm)</div>
        </div>
      </div>

      <!-- carousel -->
      <div class="carousel" id="carousel">
        <button class="nav-btn prev" id="prevBtn" aria-label="Previous">â—€</button>
        <div class="slides" id="slides" aria-live="polite" role="group"></div>
        <button class="nav-btn next" id="nextBtn" aria-label="Next">â–¶</button>
      </div>

      <div class="dots" id="dots" aria-hidden="true"></div>

      <!-- center action buttons (Ask Me = text chat, Product Assistant = voice start) -->
      <div class="center-actions">
        <button id="askBtn">Ask Me</button>
        <button id="assistBtn" class="voice">Product Assistant</button>
      </div>
    </main>

    <footer>Â© Kalindi Tradelinks Pvt Ltd</footer>
  </div>

  <!-- panel (hidden until opened by Ask Me / Product Assistant or FABs) -->
  <div class="panel" id="panel" role="dialog" aria-hidden="true">
    <header>
      <div>
        <div class="h-title" id="panelTitle">Product Assistant</div>
        <div class="h-sub" id="panelSub">Tap mic or type your question</div>
      </div>
      <div><button id="closePanel" style="background:transparent;border:0;color:var(--muted);cursor:pointer">âœ•</button></div>
    </header>
    <div class="messages" id="messages" aria-live="polite"></div>
    <div class="composer">
      <input id="inputBox" placeholder="Type your question..." aria-label="Type your question">
      <button id="sendBtn" class="btn">Send</button>
      <button id="micBtn" class="btn" style="background:linear-gradient(180deg,var(--accentWarm),#ffb085);color:#081217">ğŸ¤</button>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  // ---------- simple image loader (tries common extensions) ----------
  const exts = ['.avif','.webp','.jpg','.jpeg','.png'];
  function tryLoad(base, imgEl){
    let i = 0;
    const queue = [];
    if(/\.[a-zA-Z]{2,4}$/.test(base)) queue.push(base);
    else exts.forEach(e => queue.push(base + e));
    function next(){
      if(i >= queue.length){ imgEl.style.display = 'none'; return; }
      const src = queue[i++];
      const t = new Image();
      t.onload = function(){ imgEl.src = src; };
      t.onerror = next;
      t.src = src;
    }
    next();
  }

  // candidate logo names (your file likely matches one)
  const logoCandidates = ['assets/ktpl new logo','assets/ktpl-new-logo','assets/ktpl new logo.png','assets/ktpl-new-logo.png'];
  const logoImg = document.getElementById('logoImg');
  // try each candidate until one loads
  (function tryLogos(list){
    let idx = 0;
    function tryOne(){
      if(idx >= list.length){ logoImg.style.display='none'; return; }
      const c = list[idx++];
      // if c contains extension, try directly else try with exts
      tryLoad(c, logoImg);
    }
    tryOne();
  })(logoCandidates);

  // ---------- gallery: tv images (tv1..tv5) ----------
  const galleryBases = ['assets/fron.webp','assets/front2.webp','assets/front3.webp','assets/side1.webp','assets/side2.webp'];
  const slidesEl = document.getElementById('slides');
  galleryBases.forEach(base => {
    const img = document.createElement('img'); img.alt = 'product image'; img.loading='lazy';
    slidesEl.appendChild(img);
    tryLoad(base, img);
  });

  // build dots after slight delay
  const dotsEl = document.getElementById('dots');
  function buildDots(){
    dotsEl.innerHTML = '';
    for(let i=0;i<slidesEl.children.length;i++){
      const d = document.createElement('div'); d.className='dot'+(i===0?' active':''); d.style.cursor='pointer';
      d.addEventListener('click', ()=>{ idx = i; updateSlide(); });
      dotsEl.appendChild(d);
    }
  }

  // slider controls
  let idx = 0;
  function updateSlide(){ if(!slidesEl.children.length) return; slidesEl.style.transform = `translateX(${-idx*100}%)`; Array.from(dotsEl.children).forEach((d,i)=>d.classList.toggle('active', i===idx)); }
  document.getElementById('prevBtn').addEventListener('click', ()=>{ if(slidesEl.children.length===0) return; idx = (idx - 1 + slidesEl.children.length) % slidesEl.children.length; updateSlide(); });
  document.getElementById('nextBtn').addEventListener('click', ()=>{ if(slidesEl.children.length===0) return; idx = (idx + 1) % slidesEl.children.length; updateSlide(); });

  // swipe
  (function(){
    let startX = null;
    const car = document.getElementById('carousel');
    car.addEventListener('touchstart', e=> startX = e.changedTouches[0].clientX, {passive:true});
    car.addEventListener('touchend', e=> {
      if(startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if(Math.abs(dx) > 40){
        if(dx < 0) idx = Math.min(idx+1, slidesEl.children.length-1); else idx = Math.max(idx-1, 0);
        updateSlide();
      }
      startX = null;
    }, {passive:true});
  })();

  // try build dots after small delay
  setTimeout(()=>{ buildDots(); updateSlide(); }, 350);

  // ---------- language handling ----------
  let lang = 'en';
  const langEn = document.getElementById('langEn'), langGu = document.getElementById('langGu');
  langEn.addEventListener('click', ()=>{ lang='en'; langEn.classList.add('active'); langGu.classList.remove('active'); document.getElementById('panelSub').textContent='Tap mic or type your question'; });
  langGu.addEventListener('click', ()=>{ lang='gu'; langGu.classList.add('active'); langEn.classList.remove('active'); document.getElementById('panelSub').textContent='àª®àª¾àª‡àª• àª¦àª¬àª¾àªµà«‹ àª…àª¥àªµàª¾ àª²àª–à«‹'; });

  // ---------- panel open/close ----------
  const panel = document.getElementById('panel');
  const messagesEl = document.getElementById('messages');
  const inputBox = document.getElementById('inputBox');
  const sendBtn = document.getElementById('sendBtn');
  const micBtn = document.getElementById('micBtn');
  function openPanel(){ panel.style.display='flex'; panel.setAttribute('aria-hidden','false'); setTimeout(()=> inputBox.focus(),120); }
  function closePanel(){ panel.style.display='none'; panel.setAttribute('aria-hidden','true'); }
  document.getElementById('closePanel').addEventListener('click', closePanel);

  // Ask Me (text chat) button opens panel and focuses input
  document.getElementById('askBtn').addEventListener('click', function(){ openPanel(); inputBox.focus(); });
  // Product Assistant button opens panel and starts mic (if supported)
  document.getElementById('assistBtn').addEventListener('click', function(){ openPanel(); setTimeout(()=> micBtn.click(), 220); });

  // ---------- simple message helpers ----------
  function pushMessage(text, who='bot'){
    if(!text) return;
    const el = document.createElement('div'); el.className = 'bubble ' + (who === 'user' ? 'user' : 'bot'); el.textContent = text;
    messagesEl.appendChild(el); messagesEl.scrollTop = messagesEl.scrollHeight;
  }

  // ---------- canned prompts + English/Gujarati answers ----------
  const PROMPTS = [
    { q:/dimension|dimensions|size|height|width|depth/i, en:'See the dimension images below â€” approx W 83.8 cm Ã— H 60.4 cm Ã— D 18.45 cm (with stand).', gu:'àª®àª¾àªª àª®àª¾àªŸà«‡àª¨à«€ àª›àª¬à«€ àªœà«àª“ â€” àª²àª—àª­àª— W 83.8 cm Ã— H 60.4 cm Ã— D 18.45 cm (àª¸à«àªŸà«…àª¨à«àª¡ àª¸àª¾àª¥à«‡).' },
    { q:/feature|features|what .* include|what are the features/i, en:'Key features: 4K UHD, HDR10, Google TV, AiPQ processor, Dolby Audio, HDMI 2.1 (gaming friendly).', gu:'àª®à«àª–à«àª¯ àª²àª•à«àª·àª£à«‹: 4K UHD, HDR10, Google TV, AiPQ àªªà«àª°à«‹àª¸à«‡àª¸àª°, Dolby Audio, HDMI 2.1.' },
    { q:/colour|color|available color/i, en:'Typically available in black/graphite finish; exact options depend on stock.', gu:'àª¸àª¾àª®àª¾àª¨à«àª¯ àª°à«€àª¤à«‡ àª¬à«àª²à«‡àª•/àª—à«àª°àª¾àª«àª¾àª‡àªŸ àª°àª‚àª—àª®àª¾àª‚ àª‰àªªàª²àª¬à«àª§. àª¸à«àªŸà«‹àª• àªªàª° àª†àª§àª¾àª°.' },
    { q:/game|gaming|is it good for game|input lag/i, en:'Yes â€” HDMI 2.1, Game Mode and ALLM reduce input lag. Native refresh is 60Hz.', gu:'àª¹àª¾ â€” HDMI 2.1 àª…àª¨à«‡ àª—à«‡àª® àª®à«‹àª¡ àª‡àª¨àªªà«àªŸ àª²à«‡àª— àª˜àªŸàª¾àª¡à«‡ àª›à«‡. àª®à«‚àª³ àª°àª¿àª«à«àª°à«‡àª¶ 60Hz àª›à«‡.' },
    { q:/feedback|review|customer/i, en:'Customer feedback: sharp 4K picture and good value; some note moderate peak brightness.', gu:'àª—à«àª°àª¾àª¹àª• àªªà«àª°àª¤àª¿àª¸àª¾àª¦: àª¤à«‡àªœ 4K àª›àª¬àª¿ àª…àª¨à«‡ àª¸àª¾àª°à«‹ àª®à«‚àª²à«àª¯; àª•à«‡àªŸàª²àª¾àª•à«‡ àª®àª§à«àª¯àª® àªªà«€àª• àª¬à«àª°àª¾àª‡àªŸàª¨à«‡àª¸ àª¨à«‹àª‚àª§à«àª¯à«‹.' },
    { q:/power|watt|consumption/i, en:'Typical power consumption ~70â€“110W during operation; standby <0.5W.', gu:'àª‰àªªàª¯à«‹àª— àª¦àª°àª®àª¿àª¯àª¾àª¨ ~70â€“110W; àª¸à«àªŸà«‡àª¨à«àª¡àª¬àª¾àª¯àª®àª¾àª‚ <0.5W.' },
    { q:/hdr|dolby/i, en:'Supports HDR10; Dolby Audio supported. Dolby Vision not supported on this model.', gu:'HDR10 àª¸àªªà«‹àª°à«àªŸ; Dolby Audio àª‰àªªàª²àª¬à«àª§ àª›à«‡. Dolby Vision àª¨àª¥à«€.' },
    { q:/refresh|hz|120hz/i, en:'Native refresh is 60Hz. MEMC helps motion.', gu:'àª®à«‚àª³ àª°àª¿àª«à«àª°à«‡àª¶ 60Hz àª›à«‡. MEMC àª®à«‹àª¶àª¨ àª¸àª¹àª¾àª¯ àª•àª°à«‡ àª›à«‡.' },
    { q:/price|cost|how much|â‚¹|rupee/i, en:'This 43\" model is priced at â‚¹35,000 in our showroom. Final price may vary with offers.', gu:'àª† 43\" àª®à«‹àª¡àª²àª¨à«€ àª•àª¿àª‚àª®àª¤ àª¶à«‹àª°à«‚àª®àª®àª¾àª‚ â‚¹35,000 àª›à«‡. àª“àª«àª° àªªà«àª°àª®àª¾àª£à«‡ àª¬àª¦àª²àª¾àªˆ àª¶àª•à«‡ àª›à«‡.' }
  ];

  function getAnswer(text){
    for(const p of PROMPTS) if(p.q.test(text)) return (lang === 'en' ? p.en : p.gu);
    return (lang === 'en' ? "Sorry â€” ask about price, dimensions, features, colors, gaming, power or HDR." : "àª®àª¾àª« àª•àª°àª¶à«‹ â€” àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª•àª¿àª‚àª®àª¤, àª®àª¾àªª, àª²àª•à«àª·àª£à«‹ àª…àª¥àªµàª¾ àª—à«‡àª®àª¿àª‚àª— àªµàª¿àª¶à«‡ àªªà«‚àª›à«‹.");
  }

  // ---------- send message (typed) ----------
  sendBtn.addEventListener('click', function(){
    const v = inputBox.value && inputBox.value.trim();
    if(!v) return;
    inputBox.value = '';
    pushMessage(v,'user');
    const ans = getAnswer(v);
    setTimeout(()=> { pushMessage(ans,'bot'); speak(ans); }, 200);
  });
  inputBox.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); sendBtn.click(); } });

  // ---------- speech synthesis ----------
  function speak(text){
    if(!('speechSynthesis' in window)) return;
    try{
      const utt = new SpeechSynthesisUtterance(text);
      utt.lang = (lang === 'en' ? 'en-IN' : 'gu-IN');
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utt);
    } catch(e) {}
  }

  // ---------- subtle tap sound ----------
  let audioCtx = null;
  function playTap(){
    try{
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const now = audioCtx.currentTime; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='sine'; o.frequency.setValueAtTime(1200,now);
      g.gain.setValueAtTime(0,now); g.gain.linearRampToValueAtTime(0.12, now+0.002); g.gain.exponentialRampToValueAtTime(0.001, now+0.12);
      o.connect(g); g.connect(audioCtx.destination); o.start(now); o.stop(now+0.12);
    }catch(e){}
  }

  // ---------- speech recognition (if supported) ----------
  let recognition = null, listening = false;
  if(window.SpeechRecognition || window.webkitSpeechRecognition){
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SR();
    recognition.interimResults = false; recognition.maxAlternatives = 1;
    recognition.onresult = function(e){
      const txt = (e.results && e.results[0] && e.results[0][0] && e.results[0][0].transcript) || '';
      if(txt){
        pushMessage(txt,'user');
        const ans = getAnswer(txt);
        setTimeout(()=> { pushMessage(ans,'bot'); speak(ans); }, 220);
      }
    };
    recognition.onend = function(){ listening = false; micBtn.textContent = 'ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow=''; };
    recognition.onerror = function(){ listening = false; micBtn.textContent = 'ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow=''; };
  }

  // mic button behavior inside panel
  micBtn.addEventListener('click', function(){
    playTap();
    if(!recognition){ alert(lang==='en' ? 'Speech recognition not supported in this browser.' : 'àª† àª¬à«àª°àª¾àª‰àªàª° àª®àª¾àª‚ àª¸à«àªªà«€àªš àª°à«‡àª•à«‹àª—à«àª¨àª¿àª¶àª¨ àª¸àªªà«‹àª°à«àªŸ àª¨àª¥à«€.'); return; }
    if(!listening){
      try{
        recognition.lang = (lang === 'en' ? 'en-IN' : 'gu-IN');
        recognition.start(); listening = true;
        micBtn.textContent = 'â—'; micBtn.style.transform='scale(1.03)'; micBtn.style.boxShadow='0 8px 28px rgba(255,122,90,0.12)';
      }catch(e){ listening=false; }
    } else {
      recognition.stop(); listening=false; micBtn.textContent='ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow='';
    }
  });

  // start with helpful greeting
  setTimeout(()=> pushMessage(lang==='en' ? 'Hello â€” tap Product Assistant for voice or Ask Me to type a question.' : 'àª¹à«‡àª²à«‹ â€” àª…àªµàª¾àªœ àª®àª¾àªŸà«‡ Product Assistant àª¦àª¬àª¾àªµà«‹ àª…àª¥àªµàª¾ àª²àª–àªµàª¾ àª®àª¾àªŸà«‡ Ask Me àª¦àª¬àª¾àªµà«‹.'), 600);

  // ensure interactive elements behave on touch
  ['prevBtn','nextBtn','askBtn','assistBtn','langEn','langGu','micBtn','sendBtn'].forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.style.touchAction = 'manipulation';
  });

}); // DOMContentLoaded
</script>
</body>
</html>
