<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kalindi ‚Äî TCL 43&quot; P6K 4K HDR TV (43P6K)</title>
<style>
  /* ---------- Mobile-first modern product page ---------- */
  :root{
    --bg:#071226;
    --card:#0b2633;
    --muted:#9fb0c4;
    --accent:#00e6d8;
    --accent2:#ff8a65;
    --glass: rgba(255,255,255,0.03);
    --txt:#e9f8ff;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:
    radial-gradient(700px 360px at 12% 6%, rgba(0,230,216,0.03), transparent 10%),
    linear-gradient(180deg,var(--bg),#041021); color:var(--txt); -webkit-font-smoothing:antialiased;}

  .wrap{max-width:980px;margin:10px auto;padding:14px}

  /* header: logo left, brand name */
  header{display:flex;gap:12px;align-items:center;justify-content:flex-start;margin-bottom:12px}
  .logo-box{width:96px;height:72px;border-radius:12px;overflow:hidden;background:#fff;padding:8px;flex-shrink:0;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 36px rgba(2,8,18,0.6)}
  .logo-box img{width:100%;height:100%;object-fit:contain}
  .brand{
    display:flex;flex-direction:column;justify-content:center;
  }
  .brand .name{font-weight:800;font-size:18px}
  .brand .sub{font-size:12px;color:var(--muted);margin-top:4px}

  /* language toggle */
  .lang-toggle{margin-left:auto;display:flex;gap:8px}
  .lang-btn{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;font-weight:800}
  .lang-btn.active{background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;box-shadow:0 14px 40px rgba(0,230,216,0.06)}

  /* card */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:16px;padding:12px;box-shadow:0 24px 60px rgba(2,8,18,0.6)}

  /* product title row */
  .title-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:10px}
  .title-left{flex:1}
  .product-name{font-weight:900;font-size:20px}
  .product-size{color:var(--muted);font-size:13px;margin-top:4px}

  /* wide carousel */
  .carousel{position:relative;border-radius:12px;overflow:hidden;background:#000}
  .slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1);will-change:transform}
  .slides img{width:100%;height:260px;object-fit:cover;flex-shrink:0}
  @media(min-width:640px){ .slides img{height:340px} }
  .dot-row{display:flex;gap:8px;padding:10px}
  .dot{width:9px;height:9px;border-radius:8px;background:rgba(255,255,255,0.06)}
  .dot.active{background:linear-gradient(90deg,var(--accent),var(--accent2));box-shadow:0 10px 30px rgba(0,230,216,0.08)}

  /* prev/next overlay */
  .nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.36);border-radius:10px;padding:8px;border:0;color:var(--txt);cursor:pointer}
  .nav.prev{left:12px}
  .nav.next{right:12px}
  .nav:active{transform:translateY(-50%) scale(.98)}

  /* assistant + controls */
  .controls{display:flex;gap:10px;align-items:center;margin-top:12px}
  .btn{
    padding:10px 12px;border-radius:12px;border:0;cursor:pointer;font-weight:800;
    background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;
    box-shadow:0 12px 36px rgba(0,230,216,0.06)
  }
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);box-shadow:none}

  /* floating FABs */
  .fab{position:fixed;right:16px;bottom:18px;z-index:1200;display:flex;flex-direction:column;gap:12px}
  .fab button{width:56px;height:56px;border-radius:14px;border:0;background:linear-gradient(180deg,var(--accent),#6df0c8);color:#022426;font-size:22px;cursor:pointer;box-shadow:0 14px 40px rgba(0,230,216,0.12)}
  .fab button.voice{background:linear-gradient(180deg,var(--accent2),#ffb18b);color:#081217}

  /* chat panel (hidden until opened) */
  .panel{position:fixed;right:16px;bottom:88px;width:92vw;max-width:360px;height:62vh;background:linear-gradient(180deg,#071726,#03202b);border-radius:12px;padding:8px;box-shadow:0 28px 80px rgba(2,8,18,0.7);display:none;flex-direction:column;z-index:1250}
  .panel header{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border-bottom:1px solid rgba(255,255,255,0.03)}
  .panel .h-title{font-weight:800}
  .panel .h-sub{font-size:12px;color:var(--muted)}
  .panel .messages{flex:1;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:10px}
  .bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35}
  .bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accent2),#ffb085);color:#081217;font-weight:800}
  .bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.03);color:var(--txt)}
  .panel .composer{display:flex;gap:8px;padding:8px;border-top:1px solid rgba(255,255,255,0.03)}
  .panel input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--txt)}

  /* features grid */
  .features{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
  .features img{width:100%;height:110px;object-fit:cover;border-radius:10px;box-shadow:0 12px 36px rgba(2,8,18,0.5)}

  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-box"><img id="logo" src="assets/ktpl-new-logo.png" alt="Kalindi logo"></div>
      <div class="brand">
        <div class="name">Kalindi Tradelinks Pvt Ltd</div>
        <div class="sub">TV ‚Ä¢ Electronics ‚Ä¢ Showroom</div>
      </div>

      <div style="margin-left:auto" class="lang-toggle">
        <button id="langEn" class="lang-btn active">English</button>
        <button id="langGu" class="lang-btn">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button>
      </div>
    </header>

    <main class="card" role="main" aria-labelledby="prodTitle">
      <div class="title-row">
        <div class="title-left">
          <div id="prodTitle" class="product-name">TCL 43" P6K 4K HDR TV ‚Äî 43P6K</div>
          <div id="prodSize" class="product-size">43 inch (109 cm)</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <div style="font-weight:900;color:var(--accent);">‚Çπ35,000</div>
        </div>
      </div>

      <!-- Carousel -->
      <div class="carousel" id="carousel">
        <button class="nav prev" id="prevBtn" aria-label="Previous image">‚óÄ</button>
        <div class="slides" id="slides" aria-live="polite"></div>
        <button class="nav next" id="nextBtn" aria-label="Next image">‚ñ∂</button>
      </div>
      <div class="dot-row" id="dots"></div>

      <!-- Controls -->
      <div class="controls">
        <button id="openChat" class="btn secondary">Open Chat</button>
        <button id="openVoice" class="btn">Voice Assistant</button>
      </div>

      <!-- Features / AI / Dimension images -->
      <div class="features" id="features">
        <!-- images inserted by JS -->
      </div>
    </main>

    <footer>¬© Kalindi Tradelinks Pvt Ltd</footer>
  </div>

  <!-- Floating Buttons -->
  <div class="fab" aria-hidden="false">
    <button id="fabVoice" class="voice" title="Voice Assistant">üéôÔ∏è</button>
    <button id="fabChat" title="Chat">üí¨</button>
  </div>

  <!-- Chat / Voice Panel (hidden until opened) -->
  <div class="panel" id="panel" role="dialog" aria-hidden="true">
    <header>
      <div>
        <div class="h-title" id="panelTitle">Product Assistant</div>
        <div class="h-sub" id="panelSub">Tap mic to speak or type your question</div>
      </div>
      <div><button id="closePanel" style="background:transparent;border:0;color:var(--muted);cursor:pointer">‚úï</button></div>
    </header>
    <div class="messages" id="messages" aria-live="polite"></div>
    <div class="composer">
      <input id="inputBox" placeholder="Type your question..." />
      <button id="sendBtn" class="btn">Send</button>
      <button id="micBtn" class="btn voice">üé§</button>
    </div>
  </div>

<script>
/* ---------------- ASSETS (change names if needed) ---------------- */
const ASSETS = {
  logo: 'assets/ktpl-new-logo.png',
  gallery: ['assets/wm1.jpg','assets/wm2.jpg','assets/wm3.jpg','assets/wm4.jpg','assets/wm5.jpg'],
  features: ['assets/description1.webp','assets/description2.webp','assets/front2.webp','assets/proccessor.webp','assets/back4.webp','assets/side1.webp']
};

/* ---------------- DOM refs ---------------- */
const slidesEl = document.getElementById('slides');
const dotsEl = document.getElementById('dots');
const featuresEl = document.getElementById('features');
const panel = document.getElementById('panel');
const messagesEl = document.getElementById('messages');
const inputBox = document.getElementById('inputBox');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');

/* ---------------- language ---------------- */
let lang = 'en';
document.getElementById('langEn').addEventListener('click', ()=>{
  lang='en'; document.getElementById('langEn').classList.add('active'); document.getElementById('langGu').classList.remove('active');
  document.getElementById('panelSub').textContent = 'Tap mic to speak or type your question';
});
document.getElementById('langGu').addEventListener('click', ()=>{
  lang='gu'; document.getElementById('langGu').classList.add('active'); document.getElementById('langEn').classList.remove('active');
  document.getElementById('panelSub').textContent = '‡™Æ‡™æ‡™á‡™ï ‡™¶‡™¨‡™æ‡™µ‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™≤‡™ñ‡´ã';
});

/* ---------------- fill gallery ---------------- */
ASSETS.gallery.forEach(src=>{
  const img = document.createElement('img'); img.src = src; img.alt = 'product image';
  img.addEventListener('error', ()=> img.style.display='none');
  slidesEl.appendChild(img);
});
let current = 0;
function updateSlide(){
  slidesEl.style.transform = `translateX(${-current*100}%)`;
  Array.from(dotsEl.children).forEach((d,i)=> d.classList.toggle('active', i===current));
}
function buildDots(){
  dotsEl.innerHTML='';
  for(let i=0;i<slidesEl.children.length;i++){
    const d=document.createElement('div'); d.className='dot'+(i===0?' active':'');
    d.addEventListener('click', ()=>{ current=i; updateSlide(); });
    dotsEl.appendChild(d);
  }
}
buildDots();

/* prev/next */
document.getElementById('prevBtn').addEventListener('click', ()=>{ current = Math.max(0,current-1); updateSlide(); });
document.getElementById('nextBtn').addEventListener('click', ()=>{ current = Math.min(slidesEl.children.length-1,current+1); updateSlide(); });

/* swipe */
let startX=null;
document.getElementById('carousel').addEventListener('touchstart', e=> startX=e.changedTouches[0].clientX);
document.getElementById('carousel').addEventListener('touchend', e=>{
  if(startX===null) return;
  const dx = e.changedTouches[0].clientX - startX;
  if(Math.abs(dx)>40){
    current = dx<0 ? Math.min(current+1, slidesEl.children.length-1) : Math.max(current-1,0);
    updateSlide();
  }
  startX=null;
});

/* ---------------- features images ---------------- */
ASSETS.features.forEach(src=>{
  const i=document.createElement('img'); i.src=src; i.alt='feature'; i.loading='lazy';
  featuresEl.appendChild(i);
});

/* ---------------- panel open/close ---------------- */
function openPanel(){
  panel.style.display='flex'; panel.setAttribute('aria-hidden','false');
}
function closePanel(){
  panel.style.display='none'; panel.setAttribute('aria-hidden','true');
}
document.getElementById('openChat').addEventListener('click', openPanel);
document.getElementById('openVoice').addEventListener('click', openPanel);
document.getElementById('fabChat').addEventListener('click', openPanel);
document.getElementById('fabVoice').addEventListener('click', openPanel);
document.getElementById('closePanel').addEventListener('click', closePanel);

/* ---------------- messages utilities ---------------- */
function addMessage(text, who='bot'){
  const b=document.createElement('div'); b.className='bubble '+(who==='user'?'user':'bot'); b.textContent=text; messagesEl.appendChild(b);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* ---------------- canned responses (en + gu) ---------------- */
const PROMPTS = [
  { q:/dimension|dimensions|size|height|width|depth/i, en:'Please see the dimensions image below ‚Äî typical 43\" TV dimensions are approx. W 83.8 cm √ó H 60.4 cm √ó D 18.45 cm (with stand).', gu:'‡™Æ‡™æ‡™™ ‡™Æ‡™æ‡™ü‡´á ‡™®‡´Ä‡™ö‡´á ‡™¶‡™∞‡´ç‡™∂‡™æ‡™µ‡´á‡™≤‡´Ä ‡™õ‡™¨‡´Ä ‡™ú‡´Å‡™ì ‚Äî ‡™≤‡™ó‡™≠‡™ó W 83.8 cm √ó H 60.4 cm √ó D 18.45 cm (‡™∏‡´ç‡™ü‡´Ö‡™®‡´ç‡™° ‡™∏‡™æ‡™•‡´á).' },
  { q:/feature|features|what .* include|what are the features/i, en:'Key features: 4K UHD, HDR10, Google TV, AiPQ processor, Dolby Audio, HDMI 2.1 (gaming friendly), and smart streaming apps.', gu:'‡™Æ‡´Å‡™ñ‡´ç‡™Ø ‡™≤‡™ï‡´ç‡™∑‡™£‡´ã: 4K UHD, HDR10, Google TV, AiPQ ‡™™‡´ç‡™∞‡´ã‡™∏‡´á‡™∏‡™∞, Dolby Audio, HDMI 2.1 (‡™ó‡´á‡™Æ‡™ø‡™Ç‡™ó ‡™Æ‡™æ‡™ü‡´á), ‡™Ö‡™®‡´á ‡™∏‡´ç‡™Æ‡™æ‡™∞‡´ç‡™ü ‡™∏‡´ç‡™ü‡´ç‡™∞‡´Ä‡™Æ‡™ø‡™Ç‡™ó ‡™è‡™™‡´ç‡™∏.' },
  { q:/colour|color|available color|available colours|colour available/i, en:'Usually available in black/graphite chassis. Exact color options depend on stock.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™∞‡´Ä‡™§‡´á ‡™¨‡´ç‡™≤‡´á‡™ï/‡™ó‡´ç‡™∞‡™æ‡™´‡™æ‡™á‡™ü ‡™∞‡™Ç‡™ó‡™Æ‡™æ‡™Ç ‡™â‡™™‡™≤‡™¨‡´ç‡™ß. ‡™ö‡´ã‡™ï‡´ç‡™ï‡™∏ ‡™∞‡™Ç‡™ó ‡™∏‡´ç‡™ü‡´ã‡™ï ‡™™‡™∞ ‡™Ü‡™ß‡™æ‡™∞ ‡™∞‡™æ‡™ñ‡´á ‡™õ‡´á.' },
  { q:/game|gaming|is it good for games|input lag/i, en:'Yes ‚Äî HDMI 2.1, Game Mode and ALLM lower input lag. Native refresh is 60Hz; MEMC helps motion handling.', gu:'‡™π‡™æ ‚Äî HDMI 2.1, ‡™ó‡´á‡™Æ ‡™Æ‡´ã‡™° ‡™Ö‡™®‡´á ALLM ‡™á‡™®‡™™‡´Å‡™ü ‡™≤‡´á‡™ó ‡™ì‡™õ‡´Å‡™Ç ‡™ï‡™∞‡´á ‡™õ‡´á. ‡™Æ‡´Ç‡™≥ ‡™∞‡™ø‡™´‡´ç‡™∞‡´á‡™∂ 60Hz ‡™õ‡´á; MEMC ‡™Æ‡´ã‡™∂‡™® ‡™∏‡™æ‡™ö‡™µ‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™Æ‡™¶‡™¶ ‡™ï‡™∞‡´á ‡™õ‡´á.' },
  { q:/feedback|review|customer|rating/i, en:'Customer feedback: sharp 4K picture, good value, quiet operation. Some note moderate peak brightness; overall positive reviews.', gu:'‡™ó‡´ç‡™∞‡™æ‡™π‡™ï ‡™™‡´ç‡™∞‡™§‡™ø‡™∏‡™æ‡™¶: ‡™§‡´á‡™ú 4K ‡™õ‡™¨‡™ø, ‡™∏‡™æ‡™∞‡´ã ‡™Æ‡´Ç‡™≤‡´ç‡™Ø, ‡™∂‡™æ‡™Ç‡™§ ‡™ö‡™æ‡™≤‡™®. ‡™ï‡´á‡™ü‡™≤‡™æ‡™ï‡´á ‡™Æ‡™ß‡´ç‡™Ø‡™Æ ‡™¨‡´ç‡™∞‡™æ‡™á‡™ü‡™®‡´á‡™∏ ‡™®‡´ã‡™Ç‡™ß‡™µ‡´Ä; ‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™∞‡´Ä‡™§‡´á ‡™∏‡™ï‡™æ‡™∞‡™æ‡™§‡´ç‡™Æ‡™ï.' },
  { q:/power|watt|power consumption/i, en:'Typical power consumption ~70‚Äì110W during operation; standby <0.5W. Exact numbers vary by model/settings.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™µ‡´Ä‡™ú ‡™â‡™™‡™≠‡´ã‡™ó ~70‚Äì110W; ‡™∏‡´ç‡™ü‡´Ö‡™®‡´ç‡™°‡™¨‡™æ‡™Ø <0.5W. ‡™∏‡™æ‡™ö‡™æ ‡™Ü‡™Ç‡™ï‡™°‡™æ ‡™Æ‡´ã‡™°‡´á‡™≤/‡™∏‡´á‡™ü‡™ø‡™Ç‡™ó ‡™™‡™∞ ‡™Ü‡™ß‡™æ‡™∞ ‡™∞‡™æ‡™ñ‡´á ‡™õ‡´á.' },
  { q:/hdr|dolby|dolby audio/i, en:'Supports HDR10; Dolby Audio playback is supported. Dolby Vision is not available on this model.', gu:'HDR10 ‡™∏‡™™‡´ã‡™∞‡´ç‡™ü ‡™ï‡™∞‡´á ‡™õ‡´á; Dolby Audio ‡™™‡´ç‡™≤‡´á‡™¨‡´á‡™ï ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á. Dolby Vision ‡™Ü‡™™‡™§‡´ç‡™§‡™ø‡™Æ‡™æ‡™Ç ‡™®‡™•‡´Ä.' },
  { q:/refresh|rate|hz|120hz/i, en:'Native panel is 60Hz. MEMC provides motion interpolation for smoother motion (motion rate marketed higher).', gu:'‡™Æ‡´Ç‡™≥ ‡™™‡´á‡™®‡™≤ 60Hz ‡™õ‡´á. MEMC ‡™Æ‡´ã‡™∂‡™® ‡™á‡™®‡´ç‡™ü‡™∞‡™™‡´ã‡™≤‡´á‡™∂‡™® ‡™Ü‡™™‡´á ‡™õ‡´á ‡™ú‡´á ‡™Æ‡´ã‡™∂‡™®‡™®‡´á ‡™Æ‡™ß‡´Å‡™∞ ‡™¨‡™®‡™æ‡™µ‡´á ‡™õ‡´á.' },
  { q:/price|cost|how much|‚Çπ/rupee/i, en:'This 43\" model is listed at ‚Çπ35,000 in our showroom. Final price may vary with offers.', gu:'‡™Ü 43\" ‡™Æ‡´ã‡™°‡™≤‡™®‡´Ä ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‚Çπ35,000 ‡™§‡™∞‡´Ä‡™ï‡´á ‡™∏‡´Ç‡™ö‡™µ‡™µ‡™æ‡™Æ‡™æ‡™Ç ‡™Ü‡™µ‡´á ‡™õ‡´á. ‡™ì‡™´‡™∞ ‡™Ö‡™®‡´Å‡™∏‡™æ‡™∞ ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™¨‡™¶‡™≤‡™æ‡™à ‡™∂‡™ï‡´á ‡™õ‡´á.' }
];
function answerFor(text){
  for(const p of PROMPTS) if(p.q.test(text)) return (lang==='en'?p.en:p.gu);
  return (lang==='en'?'Sorry, I do not have that exact information. Try asking about price, dimensions, features, colors, gaming, power or HDR.':'‡™Æ‡™æ‡™´ ‡™ï‡™∞‡™∂‡´ã, ‡™Æ‡™æ‡™∞‡´Ä ‡™™‡™æ‡™∏‡´á ‡™§‡´á ‡™ö‡´ã‡™ï‡´ç‡™ï‡™∏ ‡™Æ‡™æ‡™π‡™ø‡™§‡´Ä ‡™®‡™•‡´Ä. ‡™ï‡™ø‡™Ç‡™Æ‡™§, ‡™Æ‡™æ‡™™, ‡™≤‡™ï‡´ç‡™∑‡™£‡´ã, ‡™∞‡™Ç‡™ó‡´ã, ‡™ó‡´á‡™Æ‡™ø‡™Ç‡™ó, ‡™µ‡´Ä‡™ú ‡™â‡™™‡™≠‡´ã‡™ó ‡™Ö‡™•‡™µ‡™æ HDR ‡™µ‡™ø‡™∂‡´á ‡™™‡´Å‡™õ‡´ã.');
}

/* ---------------- speech synthesis ---------------- */
function speak(text){
  if(!('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  u.lang = (lang==='en' ? 'en-IN' : 'gu-IN');
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

/* ---------------- tap sound (subtle) ---------------- */
let audioCtx=null;
function playTap(){
  try{
    if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
    const now = audioCtx.currentTime;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine'; o.frequency.setValueAtTime(1200, now);
    g.gain.setValueAtTime(0, now); g.gain.linearRampToValueAtTime(0.12, now+0.002); g.gain.exponentialRampToValueAtTime(0.001, now+0.12);
    o.connect(g); g.connect(audioCtx.destination); o.start(now); o.stop(now+0.12);
  }catch(e){}
}

/* ---------------- recognition (optional) ---------------- */
let recognition = null;
let isListening = false;
if(window.SpeechRecognition || window.webkitSpeechRecognition){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.onresult = (e)=>{
    const txt = e.results[0][0].transcript;
    addMessageUser(txt);
    const ans = answerFor(txt);
    setTimeout(()=> addMessageBot(ans), 300);
    speak(ans);
  };
  recognition.onend = ()=> { isListening=false; micBtn.style.boxShadow=''; micBtn.style.transform=''; micBtn.textContent='üé§'; }
  recognition.onerror = (e)=> { isListening=false; micBtn.style.boxShadow=''; micBtn.style.transform=''; micBtn.textContent='üé§'; }
}

/* ---------------- UI message helpers ---------------- */
function addMessageUser(text){ addMessage(text,'user'); }
function addMessageBot(text){ addMessage(text,'bot'); }
function addMessage(text,who){
  addMessageElement(text, who);
  // also show in small transcript (optional)
}
function addMessageElement(text, who){
  const div = document.createElement('div'); div.className='bubble '+(who==='user'?'user':'bot'); div.textContent=text;
  messagesEl.appendChild(div); messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* ---------------- send flow ---------------- */
sendBtn.addEventListener('click', ()=>{
  const v = inputBox.value.trim(); if(!v) return; inputBox.value=''; addMessageUser(v);
  const ans = answerFor(v);
  setTimeout(()=> addMessageBot(ans), 250);
  speak(ans);
});
inputBox.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); sendBtn.click(); } });

/* ---------------- mic button inside panel ---------------- */
micBtn.addEventListener('click', ()=>{
  playTap();
  if(!recognition){ alert('Speech recognition not supported in this browser.'); return; }
  if(!isListening){
    try{
      recognition.lang = (lang==='en'?'en-IN':'gu-IN');
      recognition.start();
      isListening=true; micBtn.textContent='‚óè'; micBtn.style.boxShadow='0 8px 30px rgba(255,138,101,0.12)'; micBtn.style.transform='scale(1.04)';
    }catch(e){ console.error(e); isListening=false }
  } else {
    recognition.stop();
    isListening=false; micBtn.textContent='üé§'; micBtn.style.boxShadow=''; micBtn.style.transform='';
  }
});

/* ---------------- FABs open panel ---------------- */
document.getElementById('fabChat').addEventListener('click', ()=>{ playTap(); openPanel(); });
document.getElementById('fabVoice').addEventListener('click', ()=>{ playTap(); openPanel(); setTimeout(()=> micBtn.click(),300); });

document.getElementById('openChat').addEventListener('click', ()=> openPanel());
document.getElementById('openVoice').addEventListener('click', ()=> { openPanel(); setTimeout(()=> micBtn.click(),300); });

function openPanel(){
  panel.style.display='flex';
  panel.setAttribute('aria-hidden','false');
  inputBox.focus();
}
document.getElementById('closePanel').addEventListener('click', ()=> closePanel());
function closePanel(){ panel.style.display='none'; panel.setAttribute('aria-hidden','true'); }

/* ---------------- quick sample prompts as buttons (optional) --------------- */
/* Add a few canned chat bubbles the user can tap for quick questions */
const quicks = ['Features','Dimensions','Colors','Gaming','Price'];
quicks.forEach(q=>{
  const btn = document.createElement('button'); btn.className='btn secondary'; btn.textContent=q;
  btn.style.marginRight='8px'; btn.style.marginTop='8px'; btn.addEventListener('click', ()=>{
    const text = q.toLowerCase();
    addMessageUser(q);
    const ans = answerFor(text);
    setTimeout(()=> addMessageBot(ans),200); speak(ans);
  });
  document.querySelector('.controls').appendChild(btn);
});

/* ---------------- init messages ---------------- */
addMessageBot(lang==='en' ? 'Hello! Tap mic or type to ask about price, features, dimensions, colours, gaming or power.' : '‡™π‡´á‡™≤‡´ã! ‡™Æ‡™æ‡™à‡™ï ‡™¶‡™¨‡™æ‡™µ‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™≤‡™ñ‡´ã ‡™Ö‡™®‡´á ‡™ï‡™ø‡™Ç‡™Æ‡™§, ‡™´‡´Ä‡™ö‡™∞‡´ç‡™∏, ‡™Æ‡™æ‡™™, ‡™∞‡™Ç‡™ó‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™µ‡´Ä‡™ú ‡™ï‡™∞‡™ñ‡™æ‡™ö ‡™µ‡™ø‡™∂‡´á ‡™™‡´Ç‡™õ‡´ã.');

/* ---------------- ensure logo path exists ---------------- */
document.getElementById('logo').src = ASSETS.logo;

/* ---------------- small accessibility tweaks: focus on input when panel opens ---------------- */
panel.addEventListener('transitionend', ()=> inputBox.focus());

/* ---------------- simple auto-advance behavior (optional) ---------------- */
let autoTimer = setInterval(()=>{ current = (current+1) % slidesEl.children.length; updateSlide(); }, 4500);

/* ---------------- small helper: updateSlide exists in earlier scope? create here ---------------- */
function updateSlide(){ slidesEl.style.transform = `translateX(${ -current * 100 }%)`; Array.from(dotsEl.children).forEach((d,i)=>d.classList.toggle('active', i===current)); }

/* ---------------- build dots after images loaded ---------------- */
function buildDots(){
  dotsEl.innerHTML=''; for(let i=0;i<slidesEl.children.length;i++){
    const d=document.createElement('div'); d.className='dot'+(i===0?' active':''); d.addEventListener('click', ()=>{ current=i; updateSlide(); });
    dotsEl.appendChild(d);
  }
}
buildDots();

/* ---------------- done ---------------- */
</script>
</body>
</html>
