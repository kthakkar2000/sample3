<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kalindi — Samsung washing machine 12kg</title>
<link rel="icon" href="assets/ktpl-new-logo.png">
<style>
  /* ---------- Color theme: Deep Navy + Sunset (warm coral + amber) ---------- */
  :root{
    --bg-1: #051028;        /* deep navy */
    --bg-2: #071220;        /* deep teal shadow */
    --panel: #07162a;
    --muted: #9fb0c4;
    --accent1: #ff6b6b;     /* warm coral */
    --accent2: #ffd166;     /* warm amber */
    --glass: rgba(255,255,255,0.03);
    --card-grad: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --text: #e6f2fb;
    --card-shadow: rgba(2,8,18,0.7);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }

  html,body{height:100%;margin:0;background:
    radial-gradient(700px 350px at 10% 8%, rgba(255,107,107,0.04), transparent 8%),
    linear-gradient(180deg,var(--bg-1),var(--bg-2)); color:var(--text); -webkit-font-smoothing:antialiased;}

  .wrap{max-width:520px;margin:18px auto;padding:18px}

  header{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:16px}
  .brand{display:flex;gap:14px;align-items:center}
  .logo{width:92px;height:92px;border-radius:14px;overflow:hidden;background:#fff;padding:10px;box-shadow:0 14px 44px rgba(2,6,12,0.65)}
  .logo img{width:100%;height:100%;object-fit:contain}
  .brand-info{line-height:1}
  .brand-name{font-weight:900;font-size:18px;letter-spacing:0.2px}
  .brand-sub{color:var(--muted);font-size:12px;margin-top:4px}

  .lang-toggle{display:flex;gap:8px}
  .lang{padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;font-weight:800;font-size:13px}
  .lang.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#061016;box-shadow:0 14px 40px rgba(255,107,107,0.08); transform:translateY(-1px)}

  .card{background:var(--card-grad);border-radius:18px;padding:14px;box-shadow:0 18px 50px var(--card-shadow)}
  .gallery{position:relative;border-radius:12px;overflow:hidden}
  .slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1)}
  .slides img{width:100%;height:360px;object-fit:cover;flex-shrink:0;background:#04101a}
  .dots{position:absolute;left:12px;bottom:12px;display:flex;gap:8px}
  .dot{width:10px;height:10px;border-radius:8px;background:rgba(255,255,255,0.06);box-shadow:0 2px 6px rgba(2,8,18,0.6)}
  .dot.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));transform:scale(1.1);box-shadow:0 10px 28px rgba(255,107,107,0.12)}

  .title-row{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
  .product-title{font-weight:900;font-size:18px}
  .price{font-weight:900;color:var(--accent2);background:linear-gradient(90deg, rgba(255,209,102,0.06), rgba(255,107,107,0.03));padding:6px 10px;border-radius:10px}

  .muted{color:var(--muted);font-size:13px;margin-top:8px}

  .specs{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
  .spec{background:var(--glass);padding:12px;border-radius:12px;font-size:13px;color:var(--text);border:1px solid rgba(255,255,255,0.02)}

  .assistant{display:flex;gap:14px;align-items:center;margin-top:16px;padding:14px;border-radius:14px;background:linear-gradient(90deg, rgba(255,107,107,0.04), rgba(255,209,102,0.02)) ;box-shadow:0 10px 30px rgba(2,8,18,0.45)}
  .mic{width:64px;height:64px;border-radius:14px;background:linear-gradient(180deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:22px;color:#061016;cursor:pointer;border:0;box-shadow:0 12px 30px rgba(2,8,18,0.5)}
  .mic.listening{transform:scale(1.05);box-shadow:0 24px 60px rgba(255,107,107,0.16)}
  .assistant-info{flex:1}
  .assistant-title{font-weight:800}
  .assistant-sub{font-size:13px;color:var(--muted);margin-top:6px}
  .transcript{margin-top:8px;color:var(--muted);font-size:14px;min-height:44px}

  /* chat */
  .chat{margin-top:16px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:12px}
  .messages{max-height:290px;overflow:auto;display:flex;flex-direction:column;gap:10px;padding-right:6px}
  .bubble{padding:12px;border-radius:12px;max-width:80%;font-size:14px;line-height:1.38}
  .bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accent2),#ffb085);color:#091016;font-weight:800}
  .bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.04);color:#e9f6fb}
  .input-row{display:flex;gap:8px;align-items:center;margin-top:6px}
  .input-row input{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit;font-size:15px;outline:none}
  .btn-send{padding:10px 14px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#061016;cursor:pointer;font-weight:900}
  .btn-voice{padding:10px;border-radius:12px;border:0;background:transparent;color:var(--muted);cursor:pointer}

  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

  /* responsive */
  @media (max-width:420px){
    .slides img{height:250px}
    .logo{width:68px;height:68px}
    .brand-name{font-size:15px}
    .product-title{font-size:16px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"><img id="logo" src="assets/ktpl-new-logo.png" alt="Kalindi logo"></div>
        <div class="brand-info">
          <div class="brand-name">Kalindi Tradelinks Pvt Ltd</div>
          <div class="brand-sub">Home Appliances • Washing Machine</div>
        </div>
      </div>

      <div class="lang-toggle" role="tablist" aria-label="Language">
        <button class="lang active" id="lang-en">English</button>
        <button class="lang" id="lang-gu">ગુજરાતી</button>
      </div>
    </header>

    <main class="card" role="main">
      <div class="gallery" id="gallery">
        <div class="slides" id="slides"></div>
        <div class="dots" id="dots" aria-hidden="true"></div>
      </div>

      <div class="title-row">
        <div class="product-title" id="productTitle">Samsung washing machine 12kg</div>
        <div class="price" id="price">₹65,000</div>
      </div>
      <div class="muted" id="rating">4.7 ★ • 2 year warranty</div>

      <div class="specs" id="specs"></div>

      <div class="assistant" role="region" aria-label="Voice assistant">
        <button class="mic" id="mainMic" title="Tap to speak" aria-pressed="false">🎙️</button>
        <div class="assistant-info">
          <div class="assistant-title" id="assistantTitle">Product Voice Assistant</div>
          <div class="assistant-sub" id="assistantSub">Tap mic or type — answers in English & Gujarati.</div>
          <div class="transcript" id="transcript">Assistant ready. Select language and tap mic or type your question.</div>
        </div>
      </div>

      <div class="chat" aria-live="polite">
        <div class="messages" id="messages" role="log" aria-relevant="additions"></div>
        <div class="input-row">
          <input id="chatInput" placeholder="Type your question..." autocomplete="off" />
          <button class="btn-send" id="sendBtn">Send</button>
          <button class="btn-voice" id="chatMic" title="Speak from chat">🎙️</button>
        </div>
      </div>

    </main>

    <footer>© Kalindi Tradelinks Pvt Ltd</footer>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const PRODUCT = {
    id: 'samsung-12kg',
    title: 'Samsung washing machine 12kg',
    price: '₹65,000',
    rating: '4.7 ★ • 2 year warranty',
    images: ['assets/wm1.jpg','assets/wm2.jpg','assets/wm3.jpg','assets/wm4.jpg','assets/wm5.jpg'],
    specs: {
      'Capacity': '12 kg',
      'Energy': '5 Star',
      'RPM': '1200',
      'Warranty': '2 years'
    },
    description_en: 'Samsung 12 kg front-load washers combine AI wash optimisation, Digital Inverter motor, Quick/Eco programs, and SmartThings on select models.',
    description_gu: 'Samsung 12 kg ફ્રન્ટ-લોડ વોશર્સમાં AI વોશ, ડિજિટલ ઇનવર્ટર મોટર, ક્વિક/એકો પ્રોગ્રામ અને SmartThings સપોર્ટ હોય છે.'
  };

  // Populate UI
  document.getElementById('productTitle').textContent = PRODUCT.title;
  document.getElementById('price').textContent = PRODUCT.price;
  document.getElementById('rating').textContent = PRODUCT.rating;

  const specsEl = document.getElementById('specs'); specsEl.innerHTML = '';
  for(const [k,v] of Object.entries(PRODUCT.specs)){
    const d = document.createElement('div'); d.className='spec';
    d.innerHTML = `<strong>${k}</strong><div style="color:var(--muted);margin-top:6px">${v}</div>`;
    specsEl.appendChild(d);
  }

  // Slider build
  const slides = document.getElementById('slides'), dots = document.getElementById('dots');
  function buildSlides(){
    slides.innerHTML=''; dots.innerHTML='';
    PRODUCT.images.forEach((src,i) => {
      const img = document.createElement('img'); img.src = src; img.alt = PRODUCT.title + ' image ' + (i+1);
      img.addEventListener('error', ()=>{ img.style.display='none'; });
      slides.appendChild(img);
      const dot = document.createElement('div'); dot.className = 'dot' + (i===0 ? ' active' : '');
      dot.addEventListener('click', ()=> { idx=i; updateSlide(); });
      dots.appendChild(dot);
    });
  }
  let idx = 0;
  function updateSlide(){ slides.style.transform = `translateX(${-idx*100}%)`; Array.from(dots.children).forEach((d,i)=> d.classList.toggle('active', i===idx)); }
  buildSlides();
  setInterval(()=> { if(slides.children.length){ idx = (idx+1) % slides.children.length; updateSlide(); } }, 4500);

  // swipe support
  let startX = null; const gallery = document.getElementById('gallery');
  gallery.addEventListener('touchstart', e => startX = e.changedTouches[0].clientX);
  gallery.addEventListener('touchend', e => {
    if(startX === null) return;
    const endX = e.changedTouches[0].clientX; const dx = endX - startX;
    if(Math.abs(dx) > 40){
      if(dx < 0) idx = Math.min(idx+1, slides.children.length-1); else idx = Math.max(idx-1, 0);
      updateSlide();
    }
    startX = null;
  });

  // Language toggle
  let currentLang = 'en';
  const langEn = document.getElementById('lang-en'), langGu = document.getElementById('lang-gu');
  function setLang(l){
    currentLang = l;
    if(l==='en'){ langEn.classList.add('active'); langGu.classList.remove('active'); document.getElementById('assistantSub').textContent='Tap mic or type — answers in English & Gujarati.'; }
    else { langGu.classList.add('active'); langEn.classList.remove('active'); document.getElementById('assistantSub').textContent='માઇક દબાવો અથવા લખો — જવાબ અંગ્રેજી અને ગુજરાતી માં.'; }
    if(recognition) recognition.lang = (currentLang === 'en' ? 'en-IN' : 'gu-IN');
  }
  langEn.addEventListener('click', ()=> setLang('en'));
  langGu.addEventListener('click', ()=> setLang('gu'));

  // Prompts
  const PRODUCT_PROMPTS = [
    { q: /price|cost|₹|rupee/i, en: `The price of this model is ${PRODUCT.price}.`, gu: `આ મોડેલની કિંમત ${PRODUCT.price} છે.` },
    { q: /stock|available/i, en: 'Stock varies by store. Please contact us to confirm availability.', gu: 'સ્ટોક સ્ટોર પર આધાર રાખે છે. કૃપા કરીને સ્ટોરમાં તપાસો.' },
    { q: /warrant(?:y|ies)|guarantee/i, en: 'This product comes with a 2 year manufacturer warranty covering defects and parts.', gu: 'આ ઉત્પાદન સાથે 2 વર્ષની વોરંટી મળે છે.' },
    { q: /usage|how to use|how do i use/i, en: 'Load clothes evenly, use recommended detergent, select the correct program and avoid overloading.', gu: 'કપડાં સમાન રીતે લોડ કરો, સૂચિત ડિટર્જન્ટ વાપરો અને ઓવરલોડ ટાળો.' },
    { q: /water|litre|consumption/i, en: 'Approx 50–70 litres per full wash depending on program.', gu: 'પુર્ણ વોશ માટે આશરે 50–70 લિટર પાણી વપરાય છે.' },
    { q: /colour|color|available color/i, en: 'Common colours: Pearl White, Graphite Silver; availability depends on stock.', gu: 'પ્રાપ્ત રંગો: પર્લ વ્હાઈટ, ગ્રાફાઇટ સિલ્વર — સ્ટોક પર આધાર.' },
    { q: /dimension|size|height|width|depth/i, en: PRODUCT.specs?.dimensions || 'Approx H 85 × W 60 × D 55–70 cm', gu: PRODUCT.specs?.dimensions || 'અંદાજિત માપ: H 85 × W 60 × D 55–70 સેમી' },
    { q: /electric|power|watt|energy/i, en: 'Typical energy per full wash is around 1.2–1.5 kWh; Eco modes reduce energy use.', gu: 'પુરા વોશ માટે લગભગ 1.2–1.5 kWh ઊર્જા расход થાય છે.' },
    { q: /dryer|dry function/i, en: 'Some variants are washer-dryer combos — check the specific model for dryer capability.', gu: 'કેટલાંક મોડેલ વોશર-ડ્રાયર હોઈ શકે છે; ચોક્કસ મોડેલ તપાસો.' },
    { q: /inverter|digital inverter|motor/i, en: 'Yes — modern Samsung front-load machines use a Digital Inverter Motor for efficiency and durability.', gu: 'હા — આધુનિક મશીનમાં ડિજિટલ ઇનવર્ટર મોટર હોય છે.' },
    { q: /advantages|why should i buy|benefit/i, en: 'Advantages: large capacity, efficient inverter motor, advanced wash programs and smart features on select models.', gu: 'લાભ: મોટી ક્ષમતા, કાર્યક્ષમ ઇનવર્ટર મોટર અને અદ્યતન પ્રોગ્રામ.' },
    { q: /smaller|instead of a smaller capacity/i, en: '12kg handles bulky items and heavy loads in fewer cycles — saving time and energy.', gu: '12 kg મોટા લોડને ઓછા સાયકલમાં ધોઈ શકે છે — સમય અને ઊર્જા બચાવે છે.' },
    { q: /programs|quick wash|eco wash|special programs/i, en: 'Yes — many models include Quick Wash, Eco mode and Hygiene/Steam cycles.', gu: 'હા — ક્વિક વોશ, એકો અને સ્ટીમ પ્રોગ્રામ ઉપલબ્ધ છે.' },
    { q: /heavy loads|blankets|curtains/i, en: 'Yes — 12 kg is suitable for blankets, curtains and other bulky items.', gu: 'હા — 12 kg ભારે લોડ માટે યોગ્ય છે.' },
    { q: /feedback|reviews|customer review/i, en: 'Sample feedback: 1) Great cleaning. 2) Large drum — great for bedding. 3) Smart features useful. 4) Quiet operation.', gu: 'ગ્રાહક પ્રતિસાદ: 1) સારી સફાઈ. 2) મોટી ડ્રમ. 3) સ્માર્ટ ફીચર્સ. 4) શાંત.' }
  ];

  const GLOBAL_PROMPTS = [
    { q: /service|repair|support/i, en: 'We provide doorstep service and free checkups during warranty period. Contact store.', gu: 'વોરંટી દરમિયાન ડોરસ્ટેપ સર્વિસ અને મફત ચેકઅપ ઉપલબ્ધ છે. સ્ટોર સંપર્ક કરો.' },
    { q: /offer|discount|sale/i, en: 'Festive discounts available occasionally — check in-store for current offers.', gu: 'તહેવાર દરમિયાન ડિસ્કાઉન્ટ ઉપલબ્ધ હોય છે — સ્ટોર તપાસો.' }
  ];

  function findAnswer(text){
    const q = text.toLowerCase();
    for(const p of PRODUCT_PROMPTS){ if(p.q.test(q)) return (currentLang==='en' ? p.en : p.gu); }
    for(const g of GLOBAL_PROMPTS){ if(g.q.test(q)) return (currentLang==='en' ? g.en : g.gu); }
    if(/describe|description|details|model description|all description/i.test(q)) return currentLang==='en' ? PRODUCT.description_en : PRODUCT.description_gu;
    return null;
  }

  // Speech synthesis & tap sound
  function speak(text){
    if(!('speechSynthesis' in window)) return;
    const u = new SpeechSynthesisUtterance(text); u.lang = (currentLang==='en' ? 'en-IN' : 'gu-IN'); u.rate = 1; window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);
  }
  let audioCtx = null;
  function playTap(){
    try{
      if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const now = audioCtx.currentTime; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
      o.type='sine'; o.frequency.setValueAtTime(1200, now); g.gain.setValueAtTime(0, now); g.gain.linearRampToValueAtTime(0.12, now + 0.001);
      g.gain.exponentialRampToValueAtTime(0.001, now + 0.12); o.connect(g); g.connect(audioCtx.destination); o.start(now); o.stop(now + 0.14);
    }catch(e){}
  }

  // Recognition
  let recognition = null; let heard = false;
  if(window.SpeechRecognition || window.webkitSpeechRecognition){
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SR(); recognition.lang = 'en-IN'; recognition.interimResults = false; recognition.maxAlternatives = 1;
    recognition.onresult = (ev)=>{ heard = true; const txt = ev.results[0][0].transcript; addMessage(txt,'user'); processQuery(txt); };
    recognition.onend = ()=>{ document.getElementById('mainMic').classList.remove('listening'); if(!heard) document.getElementById('transcript').textContent = (currentLang==='en' ? 'Tap mic to speak' : 'માઇક દબાવો અને બોલો'); heard = false; };
    recognition.onerror = (ev)=>{ document.getElementById('transcript').textContent = 'Error: ' + (ev.error || ev.message); document.getElementById('mainMic').classList.remove('listening'); heard = false; };
  }

  // Chat UI
  const messages = document.getElementById('messages');
  function addMessage(text, who='user'){ const b = document.createElement('div'); b.className = 'bubble ' + (who==='user' ? 'user' : 'bot'); b.textContent = text; messages.appendChild(b); messages.scrollTop = messages.scrollHeight; }
  function respond(text){ if(!text) text = (currentLang==='en' ? "Sorry, I don't have that info. Ask about price, usage, warranty or features." : "માફ કરશો, મારી પાસે તે માહિતી નથી. કૃપા કરીને બીજા પ્રશ્ન પૂછો."); document.getElementById('transcript').textContent = (currentLang==='en' ? 'Assistant: ' : 'સહાયક: ') + text; addMessage(text,'bot'); speak(text); }

  function processQuery(text){ const ans = findAnswer(text); if(ans){ respond(ans); return; } respond(null); }

  // Main mic
  const mainMic = document.getElementById('mainMic');
  mainMic.addEventListener('click', ()=>{ playTap(); if(!recognition){ const q = prompt(currentLang==='en' ? 'Type your question:' : 'તમારો પ્રશ્ન લખો:'); if(q){ addMessage(q,'user'); processQuery(q); } return; } mainMic.classList.add('listening'); document.getElementById('transcript').textContent = (currentLang==='en' ? 'Listening...' : 'શુણવામાં આવી રહ્યું છે...'); heard = false; recognition.lang = (currentLang==='en' ? 'en-IN' : 'gu-IN'); try{ recognition.start(); }catch(e){ mainMic.classList.remove('listening'); } });
  mainMic.addEventListener('keydown', e => { if(e.key === 'Enter' || e.key === ' ') e.target.click(); });

  // Chat send & mic
  const chatInput = document.getElementById('chatInput'), sendBtn = document.getElementById('sendBtn'), chatMic = document.getElementById('chatMic');
  sendBtn.addEventListener('click', ()=>{ const v = chatInput.value.trim(); if(!v) return; addMessage(v,'user'); chatInput.value=''; processQuery(v); });
  chatInput.addEventListener('keydown', e => { if(e.key === 'Enter'){ e.preventDefault(); sendBtn.click(); }});
  chatMic.addEventListener('click', ()=>{ playTap(); if(!recognition){ const q = prompt(currentLang==='en' ? 'Type your question:' : 'તમારો પ્રશ્ન લખો:'); if(q){ addMessage(q,'user'); processQuery(q); } return; } mainMic.classList.add('listening'); document.getElementById('transcript').textContent = (currentLang==='en' ? 'Listening...' : 'શુણવામાં આવી રહ્યું છે...'); heard = false; recognition.lang = (currentLang==='en' ? 'en-IN' : 'gu-IN'); try{ recognition.start(); }catch(e){ mainMic.classList.remove('listening'); } });

  // Language init
  setLang('en');
  document.getElementById('transcript').textContent = 'Assistant ready. Select language and tap mic or type your question.';

});
</script>
</body>
</html>
