<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kalindi â€” TCL 43" P6K (43P6K)</title>
<style>
  :root{
    --bg:#071226;
    --card:#0b2633;
    --muted:#9fb0c4;
    --accent:#00e6d8;       /* cyan */
    --accent-warm:#ff7a5a;  /* coral (mic color changed from yellow) */
    --txt:#e9f8ff;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:
    radial-gradient(700px 360px at 12% 6%, rgba(0,230,216,0.03), transparent 10%),
    linear-gradient(180deg,var(--bg),#041021); color:var(--txt); -webkit-font-smoothing:antialiased;}
  .wrap{max-width:980px;margin:8px auto;padding:12px}

  /* header: left aligned logo + brand */
  header{display:flex;gap:12px;align-items:center}
  .logo-box{width:110px;height:68px;border-radius:12px;overflow:hidden;background:#fff;padding:8px;flex-shrink:0;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 36px rgba(2,8,18,0.6)}
  .logo-box img{width:100%;height:100%;object-fit:contain}
  .brand{display:flex;flex-direction:column}
  .brand .name{font-weight:800;font-size:18px}
  .brand .sub{font-size:12px;color:var(--muted);margin-top:4px}

  /* language */
  .lang-toggle{margin-left:auto;display:flex;gap:8px;z-index:1200}
  .lang-btn{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer;font-weight:800}
  .lang-btn.active{background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;box-shadow:0 14px 40px rgba(0,230,216,0.06)}

  /* card */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:14px;padding:12px;box-shadow:0 24px 60px rgba(2,8,18,0.6);position:relative}

  .title-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:10px}
  .product-name{font-weight:900;font-size:18px}
  .product-size{color:var(--muted);font-size:13px;margin-top:4px}
  .price{font-weight:900;color:var(--accent-warm);background:linear-gradient(90deg, rgba(255,122,90,0.08), rgba(0,230,216,0.02));padding:6px 10px;border-radius:10px}

  /* wide carousel */
  .carousel{position:relative;border-radius:12px;overflow:hidden;background:#000;margin-bottom:8px}
  .slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1);will-change:transform}
  .slides img{width:100%;height:240px;object-fit:cover;flex-shrink:0}
  @media(min-width:640px){ .slides img{height:320px} }

  /* dots/prev-next */
  .dots{display:flex;gap:8px;padding:10px;justify-content:center}
  .dot{width:9px;height:9px;border-radius:8px;background:rgba(255,255,255,0.06)}
  .dot.active{background:linear-gradient(90deg,var(--accent),var(--accent-warm));box-shadow:0 10px 26px rgba(0,230,216,0.07)}

  .nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(2,6,12,0.5);border-radius:10px;padding:8px;border:0;color:var(--txt);cursor:pointer;z-index:1300}
  .nav.prev{left:10px}
  .nav.next{right:10px}

  /* controls & quick prompts */
  .controls{display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap}
  .btn{padding:10px 12px;border-radius:12px;border:0;cursor:pointer;font-weight:800;background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;box-shadow:0 12px 36px rgba(0,230,216,0.06)}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);box-shadow:none}

  /* features grid */
  .features{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
  .features img{width:100%;height:120px;object-fit:cover;border-radius:10px;box-shadow:0 12px 36px rgba(2,8,18,0.5);cursor:zoom-in}

  footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}

/* Floating buttons (ensures on top and tappable) */
.fab-wrap{position:fixed;right:14px;bottom:14px;display:flex;flex-direction:column;gap:12px;z-index:1400}
.fab{width:56px;height:56px;border-radius:14px;border:0;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;box-shadow:0 14px 40px rgba(0,0,0,0.3)}
.fab.chat{background:linear-gradient(180deg,var(--accent),#6df0c8);color:#022426}
.fab.voice{background:linear-gradient(180deg,var(--accent-warm),#ffb085);color:#081217}

/* panel (hidden until opened) */
.panel{position:fixed;right:14px;bottom:86px;width:92vw;max-width:380px;height:62vh;background:linear-gradient(180deg,#071726,#03202b);border-radius:12px;padding:8px;box-shadow:0 28px 80px rgba(2,8,18,0.7);display:none;flex-direction:column;z-index:1450}
.panel header{display:flex;align-items:center;justify-content:space-between;padding:8px 6px;border-bottom:1px solid rgba(255,255,255,0.03)}
.panel .h-title{font-weight:800}
.panel .h-sub{font-size:12px;color:var(--muted)}
.panel .messages{flex:1;padding:10px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35;word-break:break-word}
.bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accent-warm),#ffb085);color:#081217}
.bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.03);color:var(--txt)}
.panel .composer{display:flex;gap:8px;padding:8px;border-top:1px solid rgba(255,255,255,0.03)}
.panel input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--txt)}
.panel button.icon{padding:8px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;cursor:pointer}

/* ensure clickable elements sit above carousel and others */
.nav, .fab-wrap, .panel, .lang-toggle, .controls .btn { -webkit-tap-highlight-color: transparent; }
/* small adjustments */
@media(max-width:480px){
  .logo-box{width:86px;height:56px;padding:6px}
  .slides img{height:200px}
  .features img{height:96px}
}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-box"><img id="logoImg" alt="Kalindi logo"></div>
      <div class="brand">
        <div class="name">Kalindi Tradelinks Pvt Ltd</div>
        <div class="sub">TV â€¢ Electronics â€¢ Showroom</div>
      </div>

      <div class="lang-toggle" style="margin-left:auto">
        <button id="langEn" class="lang-btn active">English</button>
        <button id="langGu" class="lang-btn">àª—à«àªœàª°àª¾àª¤à«€</button>
      </div>
    </header>

    <main class="card" aria-labelledby="prodTitle">
      <div class="title-row">
        <div>
          <div id="prodTitle" class="product-name">TCL 43" P6K 4K HDR TV â€” 43P6K</div>
          <div id="prodSize" class="product-size">43 inch (109 cm)</div>
        </div>
        <div style="margin-left:auto">
          <div id="price" class="price">â‚¹35,000</div>
        </div>
      </div>

      <div class="carousel" id="carousel">
        <button class="nav prev" id="prevBtn" aria-label="Previous">â—€</button>
        <div class="slides" id="slides" aria-live="polite" role="img"></div>
        <button class="nav next" id="nextBtn" aria-label="Next">â–¶</button>
      </div>
      <div class="dots" id="dots" aria-hidden="true"></div>

      <div class="controls" id="controls">
        <button id="openChat" class="btn secondary">Open Chat</button>
        <button id="openVoice" class="btn">Voice Assistant</button>
      </div>

      <div class="features" id="features"></div>
    </main>

    <footer>Â© Kalindi Tradelinks Pvt Ltd</footer>
  </div>

  <!-- Floating action buttons -->
  <div class="fab-wrap" aria-hidden="false">
    <button id="fabVoice" class="fab voice" title="Voice assistant">ğŸ™ï¸</button>
    <button id="fabChat" class="fab chat" title="Chat">ğŸ’¬</button>
  </div>

  <!-- Chat / Voice panel -->
  <div class="panel" id="panel" role="dialog" aria-hidden="true">
    <header>
      <div>
        <div class="h-title" id="panelTitle">Product Assistant</div>
        <div class="h-sub" id="panelSub">Tap mic or type your question</div>
      </div>
      <div><button id="closePanel" style="background:transparent;border:0;color:var(--muted);cursor:pointer">âœ•</button></div>
    </header>
    <div class="messages" id="messages" aria-live="polite"></div>
    <div class="composer">
      <input id="inputBox" placeholder="Type your question..." aria-label="Type your question">
      <button id="sendBtn" class="icon">Send</button>
      <button id="micBtn" class="icon">ğŸ¤</button>
    </div>
  </div>

<script>
/* ---------------- robust asset loader: tries multiple extensions for each base name ---------------- */
const imgExtCandidates = ['.avif','.webp','.jpg','.jpeg','.png'];
function tryLoadFirst(basePaths, imgEl){
  // basePaths: array of base path strings without extension, e.g. ['assets/wm1','assets/wm1.avif'] okay
  const queue = [];
  basePaths.forEach(bp=>{
    if(bp.includes('.')) queue.push(bp);
    else imgExtCandidates.forEach(ext=> queue.push(bp + ext));
  });
  let idx=0;
  function tryNext(){
    if(idx>=queue.length){ imgEl.style.display='none'; return; }
    const src = queue[idx++]; const tester = new Image();
    tester.onload = ()=> { imgEl.src = src; };
    tester.onerror = ()=> tryNext();
    tester.src = src;
  }
  tryNext();
}

/* ---------------- ASSET base names (edit if you renamed files) ---------------- */
const ASSET_BASE = {
  logoCandidates: ['assets/ktpl-new-logo','assets/ktpl new logo','assets/ktpl new logo.png','assets/ktpl-new-logo.png'],
  galleryBase: ['assets/wm1','assets/wm2','assets/wm3','assets/wm4','assets/wm5'],
  featureBase: ['assets/description1','assets/description2','assets/front2','assets/proccessor','assets/back4','assets/side1']
};

/* set logo (tries a few common names) */
const logoImg = document.getElementById('logoImg');
tryLoadFirst(ASSET_BASE.logoCandidates, logoImg);

/* build gallery using robust loader */
const slidesEl = document.getElementById('slides');
ASSET_BASE.galleryBase.forEach(base=>{
  const img = document.createElement('img'); img.alt = 'product image'; img.loading='lazy';
  slidesEl.appendChild(img);
  tryLoadFirst([base], img);
});

/* build dots */
const dotsEl = document.getElementById('dots');
function buildDots(){
  dotsEl.innerHTML='';
  for(let i=0;i<slidesEl.children.length;i++){
    const d = document.createElement('div'); d.className='dot'+(i===0? ' active':'');
    d.addEventListener('click', ()=>{ current = i; updateSlide(); });
    dotsEl.appendChild(d);
  }
}
let current = 0;
function updateSlide(){ slidesEl.style.transform = `translateX(${-current*100}%)`; Array.from(dotsEl.children).forEach((d,i)=>d.classList.toggle('active', i===current)); }
buildDots();

/* prev/next handlers */
document.getElementById('prevBtn').addEventListener('click', ()=>{ current = Math.max(0,current-1); updateSlide(); });
document.getElementById('nextBtn').addEventListener('click', ()=>{ current = Math.min(slidesEl.children.length-1,current+1); updateSlide(); });

/* swipe support (mobile) */
let startX = null;
document.getElementById('carousel').addEventListener('touchstart', e => startX = e.changedTouches[0].clientX);
document.getElementById('carousel').addEventListener('touchend', e => {
  if(startX===null) return;
  const dx = e.changedTouches[0].clientX - startX;
  if(Math.abs(dx) > 40){
    current = dx < 0 ? Math.min(current+1, slidesEl.children.length-1) : Math.max(current-1, 0);
    updateSlide();
  }
  startX = null;
});

/* features images */
const featuresEl = document.getElementById('features');
ASSET_BASE.featureBase.forEach(base=>{
  const img = document.createElement('img'); img.alt='feature image'; img.loading='lazy';
  tryLoadFirst([base], img);
  featuresEl.appendChild(img);
});

/* ---------------- language handling ---------------- */
let lang = 'en';
const langEnBtn = document.getElementById('langEn'), langGuBtn = document.getElementById('langGu');
langEnBtn.addEventListener('click', ()=>{ lang='en'; langEnBtn.classList.add('active'); langGuBtn.classList.remove('active'); document.getElementById('panelSub').textContent='Tap mic or type your question'; });
langGuBtn.addEventListener('click', ()=>{ lang='gu'; langGuBtn.classList.add('active'); langEnBtn.classList.remove('active'); document.getElementById('panelSub').textContent='àª®àª¾àª‡àª• àª¦àª¬àª¾àªµà«‹ àª…àª¥àªµàª¾ àª²àª–à«‹'; });

/* ---------------- panel open/close ---------------- */
const panel = document.getElementById('panel');
function openPanel(){ panel.style.display='flex'; panel.setAttribute('aria-hidden','false'); setTimeout(()=> inputBox.focus(),120); }
function closePanel(){ panel.style.display='none'; panel.setAttribute('aria-hidden','true'); }
document.getElementById('openChat').addEventListener('click', openPanel);
document.getElementById('openVoice').addEventListener('click', ()=>{ openPanel(); setTimeout(()=> micBtn.click(),200); });
document.getElementById('fabChat').addEventListener('click', openPanel);
document.getElementById('fabVoice').addEventListener('click', ()=>{ openPanel(); setTimeout(()=> micBtn.click(),200); });
document.getElementById('closePanel').addEventListener('click', closePanel);

/* ---------------- messages ---------------- */
const messagesEl = document.getElementById('messages');
const inputBox = document.getElementById('inputBox');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');

function addBubble(text, who='bot'){
  const d = document.createElement('div'); d.className = 'bubble ' + (who==='user' ? 'user' : 'bot');
  d.textContent = text; messagesEl.appendChild(d); messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* canned prompts (en + gu) */
const PROMPTS = [
  { q:/dimension|dimensions|size|height|width|depth/i, en:'See the dimension images below â€” approx W 83.8 cm Ã— H 60.4 cm Ã— D 18.45 cm (with stand).', gu:'àª®àª¾àªª àª®àª¾àªŸà«‡ àª¨à«€àªšà«‡àª¨àª¾àª‚ àª›àª¬à«€ àªœà«àª“ â€” àª²àª—àª­àª— W 83.8 cm Ã— H 60.4 cm Ã— D 18.45 cm (àª¸à«àªŸà«…àª¨à«àª¡ àª¸àª¾àª¥à«‡).' },
  { q:/feature|features|what .* include|what are the features/i, en:'Key features: 4K UHD, HDR10, Google TV, AiPQ processor, Dolby Audio, HDMI 2.1 (gaming friendly).', gu:'àª®à«àª–à«àª¯ àª²àª•à«àª·àª£à«‹: 4K UHD, HDR10, Google TV, AiPQ àªªà«àª°à«‹àª¸à«‡àª¸àª°, Dolby Audio, HDMI 2.1.' },
  { q:/colour|color|available color/i, en:'Typically available in black/graphite finish; exact options depend on stock.', gu:'àª¸àª¾àª®àª¾àª¨à«àª¯ àª°à«€àª¤à«‡ àª¬à«àª²à«‡àª•/àª—à«àª°àª¾àª«àª¾àª‡àªŸ àª°àª‚àª—àª®àª¾àª‚ àª‰àªªàª²àª¬à«àª§. àª¸à«àªŸà«‹àª• àªªàª° àª†àª§àª¾àª° àª°àª¾àª–à«‡ àª›à«‡.' },
  { q:/game|gaming|is it good for game|input lag/i, en:'Yes â€” HDMI 2.1, Game Mode and ALLM reduce input lag. Native refresh 60Hz; MEMC helps motion.', gu:'àª¹àª¾ â€” HDMI 2.1, àª—à«‡àª® àª®à«‹àª¡ àª…àª¨à«‡ ALLM àª‡àª¨àªªà«àªŸ àª²à«‡àª— àª˜àªŸàª¾àª¡à«€ àª¶àª•à«‡ àª›à«‡. àª®à«‚àª³ àª°àª¿àª«à«àª°à«‡àª¶ 60Hz àª›à«‡.' },
  { q:/feedback|review|customer/i, en:'Customers praise the 4K clarity and value; some note moderate peak brightness.', gu:'àª—à«àª°àª¾àª¹àª•à«‹ 4K àª•à«‹àª²àª¿àªŸà«€ àª…àª¨à«‡ àª®à«‚àª²à«àª¯àª¨à«‡ àªµàª–àª¾àª£à«‡ àª›à«‡; àª•à«‡àªŸàª²àª¾àª•à«‡ àª®àª§à«àª¯àª® àª¬à«àª°àª¾àª‡àªŸàª¨à«‡àª¸ àª¨à«‹àª‚àª§à«àª¯à«‹.' },
  { q:/power|watt|consumption/i, en:'Typical operation ~70â€“110W; standby <0.5W. Exact depends on model/settings.', gu:'àª‰àªªàª¯à«‹àª— àªµàª–àª¤à«‡ ~70â€“110W; àª¸à«àªŸà«‡àª¨à«àª¡àª¬àª¾àª¯ <0.5W. àª®à«‹àª¡à«‡àª² àªªàª° àª†àª§àª¾àª°.' },
  { q:/hdr|dolby/i, en:'Supports HDR10; Dolby Audio supported. Dolby Vision not supported on this model.', gu:'HDR10 àª¸àªªà«‹àª°à«àªŸ; Dolby Audio àª‰àªªàª²àª¬à«àª§ àª›à«‡. Dolby Vision àª‰àªªàª²àª¬à«àª§ àª¨àª¥à«€.' },
  { q:/refresh|hz|120hz/i, en:'Native refresh is 60Hz. Motion interpolation (MEMC) is present for smoother motion.', gu:'àª®à«‚àª³ àª°àª¿àª«à«àª°à«‡àª¶ 60Hz àª›à«‡. MEMC àªµàª§à« àª¸àª°àª¸ àª®à«‹àª¶àª¨ àª®àª¾àªŸà«‡ àª›à«‡.' },
  { q:/price|cost|how much|â‚¹/rupee/i, en:'This 43\" model is priced at â‚¹35,000 in our showroom. Final price may vary with offers.', gu:'àª† 43\" àª®à«‹àª¡àª²àª¨à«€ àª•àª¿àª‚àª®àª¤ àª¶à«‹àª°à«‚àª®àª®àª¾àª‚ â‚¹35,000 àª›à«‡. àª“àª«àª° àªªà«àª°àª®àª¾àª£à«‡ àª•àª¿àª‚àª®àª¤ àª¬àª¦àª²àª¾àªˆ àª¶àª•à«‡ àª›à«‡.' }
];

function findAnswer(text){
  for(const p of PROMPTS) if(p.q.test(text)) return (lang==='en' ? p.en : p.gu);
  return (lang==='en' ? "Sorry â€” ask about price, dimensions, features, colors, gaming, power or HDR." : "àª®àª¾àª« àª•àª°àª¶à«‹ â€” àª•àª¿àª‚àª®àª¤, àª®àª¾àªª, àª²àª•à«àª·àª£à«‹, àª°àª‚àª—à«‹, àª—à«‡àª®àª¿àª‚àª—, àªµà«€àªœ àª–àª°à«àªš àª…àª¥àªµàª¾ HDR àªµàª¿àª¶à«‡ àªªà«‚àª›à«‹.");
}

/* ---------------- input handlers ---------------- */
sendBtn.addEventListener('click', ()=>{
  const v = inputBox.value.trim(); if(!v) return; inputBox.value=''; addBubble(v,'user');
  const ans = findAnswer(v);
  setTimeout(()=> addBubble(ans,'bot'), 200);
  speak(ans);
});
inputBox.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendBtn.click(); } });

/* ---------------- speech synthesis ---------------- */
function speak(text){
  if(!('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(text);
  u.lang = (lang==='en' ? 'en-IN' : 'gu-IN');
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

/* ---------------- tap tone ---------------- */
let audioCtx = null;
function playTap(){
  try{
    if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
    const now = audioCtx.currentTime; const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
    o.type='sine'; o.frequency.setValueAtTime(1200, now); g.gain.setValueAtTime(0, now); g.gain.linearRampToValueAtTime(0.12, now+0.002);
    g.gain.exponentialRampToValueAtTime(0.001, now+0.12); o.connect(g); g.connect(audioCtx.destination); o.start(now); o.stop(now+0.12);
  }catch(e){}
}

/* ---------------- recognition (start/stop) ---------------- */
let recognition=null, isListening=false;
if(window.SpeechRecognition || window.webkitSpeechRecognition){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.onresult = (e)=>{
    const txt = e.results[0][0].transcript;
    addBubble(txt,'user');
    const ans = findAnswer(txt);
    setTimeout(()=> addBubble(ans,'bot'), 200);
    speak(ans);
  };
  recognition.onend = ()=> { isListening=false; micBtn.textContent='ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow=''; }
  recognition.onerror = ()=> { isListening=false; micBtn.textContent='ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow=''; }
}

/* open panel & start recognition if needed */
document.getElementById('fabVoice').addEventListener('click', ()=>{
  playTap(); openPanel();
  setTimeout(()=> { if(recognition){ try{ recognition.lang = (lang==='en'?'en-IN':'gu-IN'); recognition.start(); isListening=true; micBtn.textContent='â—'; micBtn.style.transform='scale(1.02)'; micBtn.style.boxShadow='0 8px 28px rgba(255,122,90,0.12)'; }catch(e){ console.warn(e); } } }, 300);
});
document.getElementById('fabChat').addEventListener('click', ()=>{ playTap(); openPanel(); });

/* mic control inside panel */
micBtn.addEventListener('click', ()=>{
  playTap();
  if(!recognition){ alert(lang==='en' ? 'Speech recognition not supported in this browser.' : 'àª† àª¬à«àª°àª¾àª‰àªàª° àª®àª¾àª‚ àª¸à«àªªà«€àªš àª°à«‡àª•à«‹àª—à«àª¨àª¿àª¶àª¨ àª¸àªªà«‹àª°à«àªŸ àª¨àª¥à«€.') ; return; }
  if(!isListening){
    try{
      recognition.lang = (lang==='en' ? 'en-IN' : 'gu-IN'); recognition.start(); isListening=true; micBtn.textContent='â—'; micBtn.style.transform='scale(1.02)'; micBtn.style.boxShadow='0 8px 28px rgba(255,122,90,0.12)';
    }catch(e){ isListening=false; }
  } else {
    recognition.stop(); isListening=false; micBtn.textContent='ğŸ¤'; micBtn.style.transform=''; micBtn.style.boxShadow='';
  }
});

/* quick prompts buttons (small samples in controls) */
['Features','Dimensions','Colors','Gaming','Price'].forEach(label=>{
  const b = document.createElement('button'); b.className='btn secondary'; b.textContent=label;
  b.addEventListener('click', ()=>{ addBubble(label,'user'); const ans = findAnswer(label); setTimeout(()=> addBubble(ans,'bot'),200); speak(ans); });
  document.getElementById('controls').appendChild(b);
});

/* helper to add bubbles (public) */
function addBubble(text, who='bot'){ addBubbleElement(text, who); }
function addBubbleElement(text, who){
  const el = document.createElement('div'); el.className = 'bubble ' + (who==='user' ? 'user' : 'bot'); el.textContent = text;
  messagesEl.appendChild(el); messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* init: greeting */
setTimeout(()=> addBubbleElement(lang==='en' ? 'Hello â€” ask about price, features, dimensions, colors or gaming.' : 'àª¹à«‡àª²à«‹ â€” àª•àª¿àª‚àª®àª¤, àª²àª•à«àª·àª£à«‹, àª®àª¾àªª àª…àª¥àªµàª¾ àª—à«‡àª®àª¿àª‚àª— àªµàª¿àª¶à«‡ àªªà«‚àª›à«‹.'), 600);

/* build dots and start auto-rotate safely (images may be loaded async) */
function rebuildDotsWhenReady(){
  if(slidesEl.children.length === 0) return;
  buildDots();
  clearInterval(autoRotate);
  autoRotate = setInterval(()=>{ current = (current+1) % slidesEl.children.length; updateSlide(); }, 4500);
}
let autoRotate = setInterval(()=>{ if(slidesEl.children.length) { current = (current+1) % slidesEl.children.length; updateSlide(); } }, 4500);

/* attempt to rebuild dots after a short delay (gives loader time) */
setTimeout(()=>{ buildDots(); }, 300);

/* ensure clickable elements are on top (touch) */
['fabVoice','fabChat','openChat','openVoice','prevBtn','nextBtn','micBtn','sendBtn','langEn','langGu'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.style.touchAction = 'manipulation';
});
</script>
</body>
</html>
