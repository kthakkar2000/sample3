<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Kalindi ‚Äî TCL 43" P6K (43P6K)</title>
<style>
  :root{
    --bg:#071226; --muted:#9fb0c4; --accent:#00e6d8; --accentWarm:#ff6b57; --txt:#e9f8ff;
    font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#041021);color:var(--txt);-webkit-font-smoothing:antialiased}
  .wrap{max-width:980px;margin:8px auto;padding:12px}

/* header */
header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.logo-box{width:140px;height:86px;border-radius:12px;overflow:hidden;background:#fff;padding:10px;flex-shrink:0;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 36px rgba(2,8,18,0.6)}
.logo-box img{width:100%;height:100%;object-fit:contain}
.brand{display:flex;flex-direction:column}
.brand .name{font-weight:900;font-size:18px}
.brand .sub{font-size:12px;color:var(--muted);margin-top:4px}

/* language dropdown */
.lang-select{margin-left:auto}
select#langSelect{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));color:var(--txt);font-weight:800;cursor:pointer}

/* card */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:14px;padding:12px;box-shadow:0 24px 60px rgba(2,8,18,0.6);position:relative}
.title-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.product-name{font-weight:900;font-size:18px}
.product-size{color:var(--muted);font-size:13px;margin-top:6px}
.price-badge{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,#ffd36b,#ff9f6b);color:#081217;font-weight:900;margin-left:8px;box-shadow:0 10px 30px rgba(255,160,100,0.12)}

/* carousel */
.carousel{position:relative;border-radius:12px;overflow:hidden;background:#000;margin-bottom:12px}
.slides{display:flex;transition:transform .36s cubic-bezier(.2,.9,.2,1);will-change:transform}
.slides img{width:100%;height:320px;object-fit:contain;flex-shrink:0;display:block;background:linear-gradient(180deg,#000,#05060a)}
@media(min-width:640px){ .slides img{height:380px} }
.dots{display:flex;gap:8px;padding:10px;justify-content:center}
.dot{width:9px;height:9px;border-radius:8px;background:rgba(255,255,255,0.06)}
.dot.active{background:linear-gradient(90deg,var(--accent),var(--accentWarm));box-shadow:0 10px 26px rgba(0,230,216,0.07)}
.nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.5);border-radius:10px;padding:8px;border:0;color:var(--txt);cursor:pointer;z-index:3000}
.nav-btn.prev{left:8px}
.nav-btn.next{right:8px}

/* center actions */
.center-actions{display:flex;gap:12px;justify-content:center;margin:10px 0 0}
.center-actions button{padding:12px 18px;border-radius:12px;border:0;cursor:pointer;font-weight:900;background:linear-gradient(90deg,var(--accent),#6df0c8);color:#022426;box-shadow:0 14px 40px rgba(0,230,216,0.06);display:flex;align-items:center;gap:10px;font-size:16px}
.center-actions button.voice{background:linear-gradient(90deg,var(--accentWarm),#ffb085);color:#081217}
.center-actions .icon{display:inline-flex;width:28px;height:28px;border-radius:8px;align-items:center;justify-content:center;font-size:16px;background:rgba(255,255,255,0.96);color:#081217}

/* chat panel */
.panel{position:fixed;right:12px;bottom:calc(14px + env(safe-area-inset-bottom));width:92vw;max-width:420px;height:62vh;background:linear-gradient(180deg,#071726,#03202b);border-radius:12px;padding:0;box-shadow:0 28px 80px rgba(2,8,18,0.7);display:none;flex-direction:column;z-index:6550;overflow:hidden}
.panel header{display:flex;align-items:center;justify-content:space-between;padding:12px 12px;border-bottom:1px solid rgba(255,255,255,0.03);gap:12px}
.panel .h-left{display:flex;flex-direction:column}
.panel .h-title{font-weight:800}
.panel .h-sub{font-size:12px;color:var(--muted)}
#listeningBanner{display:none;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;background:linear-gradient(90deg,var(--accentWarm),#ffb085);color:#081217;font-weight:800;margin-left:6px}
#listeningBanner .pulse{width:10px;height:10px;border-radius:50%;background:#081217}
@keyframes pulse { 0%{transform:scale(1);opacity:1} 70%{transform:scale(1.8);opacity:0.6} 100%{transform:scale(1);opacity:1} }
#listeningBanner.active .pulse{animation:pulse 1s infinite}
.panel .messages{flex:1;padding:12px;overflow:auto;display:flex;flex-direction:column;gap:8px;background:linear-gradient(180deg, rgba(255,255,255,0.004), rgba(255,255,255,0.002))}
.bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.35;word-break:break-word}
.bubble.user{align-self:flex-end;background:linear-gradient(90deg,var(--accentWarm),#ffb085);color:#081217}
.bubble.bot{align-self:flex-start;background:rgba(255,255,255,0.03);color:var(--txt)}
.panel .composer{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(255,255,255,0.03);background:linear-gradient(180deg, rgba(0,0,0,0.05), transparent)}
.panel input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--txt);outline:none}

/* lightbox */
#lightbox{position:fixed;left:0;top:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;background:rgba(4,6,12,0.82);z-index:9999}
#lightbox .box{position:relative;max-width:100%;max-height:100%;display:flex;align-items:center;justify-content:center}
#lightbox img{max-width:95vw;max-height:85vh;object-fit:contain;touch-action:pan-y}
#lb-close{position:absolute;top:18px;right:18px;background:rgba(255,255,255,0.06);border:0;color:var(--txt);padding:8px;border-radius:8px;cursor:pointer}
#lb-prev,#lb-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.03);border:0;color:var(--txt);padding:10px;border-radius:10px;cursor:pointer}
#lb-prev{left:18px} #lb-next{right:18px}
#lb-zoomHint{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.04);padding:8px 12px;border-radius:999px;font-size:13px;color:var(--muted)}

/* responsive tweaks */
footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
@media(max-width:480px){
  .logo-box{width:120px;height:68px;padding:8px}
  .slides img{height:220px}
}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-box"><img id="mainLogo" alt="Kalindi logo"></div>
      <div class="brand">
        <div class="name">Kalindi Tradelinks Pvt Ltd</div>
        <div class="sub">TV ‚Ä¢ Electronics ‚Ä¢ Showroom</div>
      </div>

      <div class="lang-select">
        <label for="langSelect" style="display:none">Language</label>
        <select id="langSelect" title="Select language">
          <option value="en">English</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
        </select>
      </div>
    </header>

    <main class="card" aria-labelledby="prodTitle">
      <div class="title-row">
        <div>
          <div id="prodTitle" class="product-name">TCL 43" P6K 4K HDR TV ‚Äî 43P6K</div>
          <div id="prodSize" class="product-size">43 inch (109 cm) ‚Ä¢ <span class="price-badge">‚Çπ35,000</span></div>
        </div>
      </div>

      <div class="carousel" id="carousel">
        <button class="nav-btn prev" id="prevBtn" aria-label="Previous">‚óÄ</button>
        <div class="slides" id="slides" aria-live="polite" role="group"></div>
        <button class="nav-btn next" id="nextBtn" aria-label="Next">‚ñ∂</button>
      </div>
      <div class="dots" id="dots" aria-hidden="true"></div>

      <div class="center-actions">
        <button id="askBtn"><span class="icon">üí¨</span> Ask Me</button>
        <button id="assistBtn" class="voice"><span class="icon">üéôÔ∏è</span> Product Assistant</button>
      </div>
    </main>

    <footer>¬© Kalindi Tradelinks Pvt Ltd</footer>
  </div>

  <!-- chat panel -->
  <div class="panel" id="panel" role="dialog" aria-hidden="true">
    <header>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="h-left">
          <div class="h-title" id="panelTitle">Product Assistant</div>
          <div class="h-sub" id="panelSub">Tap mic or type your question</div>
        </div>
        <div id="listeningBanner"><div class="pulse"></div><div id="listeningText">Listening...</div></div>
      </div>
      <div><button id="closePanel" style="background:transparent;border:0;color:var(--muted);cursor:pointer">‚úï</button></div>
    </header>

    <div class="messages" id="messages" aria-live="polite"></div>

    <div class="composer">
      <input id="inputBox" placeholder="Type your question..." aria-label="Type your question">
      <button id="sendBtn" class="btn">Send</button>
      <button id="micBtn" class="btn" style="background:linear-gradient(180deg,var(--accentWarm),#ffb085);color:#081217">üé§</button>
    </div>
  </div>

  <!-- lightbox -->
  <div id="lightbox" aria-hidden="true">
    <div class="box">
      <button id="lb-close" title="Close">‚úï</button>
      <button id="lb-prev" title="Previous">‚óÄ</button>
      <img id="lb-img" alt="full image">
      <button id="lb-next" title="Next">‚ñ∂</button>
      <div id="lb-zoomHint">Double-tap to zoom ¬∑ Pinch to zoom</div>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  // --- helpers to try multiple filenames (extensions and variants) ---
  const exts = ['.avif','.webp','.jpg','.jpeg','.png'];
  function tryLoadVariants(candidates, imgEl, hideIfFail=true){
    let i=0;
    const queue=[];
    candidates.forEach(b=>{
      if(/\.[a-zA-Z]{2,4}$/.test(b)) queue.push(b);
      else exts.forEach(e=>queue.push(b+e));
    });
    function next(){
      if(i>=queue.length){ if(hideIfFail) imgEl.style.display='none'; return; }
      const s = queue[i++];
      const t = new Image();
      t.onload = ()=> { imgEl.src = s; };
      t.onerror = next;
      t.src = s;
    }
    next();
  }

  // --- load logo (tries common names) ---
  const logoCandidates = ['assets/ktpl-new-logo.jpg','assets/ktpl new logo.jpg','assets/ktpl-new-logo.png','assets/ktpl new logo.png','assets/ktpl-new-logo.webp','assets/ktpl-new-logo.jpeg'];
  tryLoadVariants(logoCandidates, document.getElementById('mainLogo'));

  // --- gallery images (variants) ---
  const galleryNames = ['back4.webp','back5.webp','fron.webp','front2.webp','front3.webp','more screen.webp','side1.webp','side2.webp','top.webp'];
  function makeVariants(name){
    const ext = name.match(/\.[^/.]+$/) ? name.match(/\.[^/.]+$/)[0] : '';
    const base = name.replace(/\.[^/.]+$/,'');
    const variants = [];
    variants.push('assets/' + name);
    variants.push('assets/' + base.replace(/\s+/g,'') + ext);
    variants.push('assets/' + base.replace(/\s+/g,'-') + ext);
    variants.push('assets/' + base.replace(/\s+/g,'_') + ext);
    variants.push('assets/' + base);
    return variants;
  }

  const slidesEl = document.getElementById('slides');
  const galleryList = [];
  galleryNames.forEach(n=>{
    const img = document.createElement('img'); img.alt='product image'; img.loading='lazy';
    slidesEl.appendChild(img);
    const v = makeVariants(n);
    tryLoadVariants(v, img);
    galleryList.push(img);
    img.addEventListener('click', ()=> openLightbox(galleryList.indexOf(img)));
  });

  // --- dots + slider ---
  const dotsEl = document.getElementById('dots');
  function buildDots(){
    dotsEl.innerHTML='';
    for(let i=0;i<slidesEl.children.length;i++){
      const d = document.createElement('div'); d.className='dot'+(i===0?' active':''); d.style.cursor='pointer';
      d.addEventListener('click', ()=>{ idx = i; updateSlide(); });
      dotsEl.appendChild(d);
    }
  }
  let idx = 0;
  function updateSlide(){ if(!slidesEl.children.length) return; slidesEl.style.transform = `translateX(${-idx*100}%)`; Array.from(dotsEl.children).forEach((d,i)=> d.classList.toggle('active', i===idx)); }
  document.getElementById('prevBtn').addEventListener('click', ()=>{ if(!slidesEl.children.length) return; idx = (idx-1+slidesEl.children.length)%slidesEl.children.length; updateSlide(); });
  document.getElementById('nextBtn').addEventListener('click', ()=>{ if(!slidesEl.children.length) return; idx = (idx+1)%slidesEl.children.length; updateSlide(); });

  // swipe
  (function(){ let startX=null; const c=document.getElementById('carousel'); c.addEventListener('touchstart', e=> startX=e.changedTouches[0].clientX, {passive:true}); c.addEventListener('touchend', e=>{ if(startX===null) return; const dx=e.changedTouches[0].clientX-startX; if(Math.abs(dx)>40){ if(dx<0) idx=Math.min(idx+1, slidesEl.children.length-1); else idx=Math.max(idx-1,0); updateSlide(); } startX=null; }, {passive:true}); })();

  setTimeout(()=>{ buildDots(); updateSlide(); }, 380);

  // --- lightbox implementation ---
  const lb = document.getElementById('lightbox');
  const lbImg = document.getElementById('lb-img');
  const lbClose = document.getElementById('lb-close');
  const lbPrev = document.getElementById('lb-prev');
  const lbNext = document.getElementById('lb-next');
  const lbHint = document.getElementById('lb-zoomHint');
  let lbIndex = 0;
  let zoomed = false;
  function openLightbox(i){
    lbIndex = i;
    const imgEl = slidesEl.children[lbIndex];
    if(!imgEl) return;
    const src = imgEl.src || imgEl.getAttribute('data-src') || imgEl.getAttribute('src') || '';
    lbImg.src = src;
    lb.style.display='flex'; lb.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    zoomed = false; lbImg.style.transform = 'translate(0,0) scale(1)';
    lbPrev.style.display = (galleryList.length>1 ? 'block' : 'none');
    lbNext.style.display = (galleryList.length>1 ? 'block' : 'none');
    lbHint.style.display = 'block';
  }
  function closeLightbox(){ lb.style.display='none'; lb.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
  function showPrev(){ if(galleryList.length<=1) return; lbIndex = (lbIndex-1 + galleryList.length) % galleryList.length; lbImg.src = slidesEl.children[lbIndex].src; zoomed=false; lbImg.style.transform='translate(0,0) scale(1)'; }
  function showNext(){ if(galleryList.length<=1) return; lbIndex = (lbIndex+1) % galleryList.length; lbImg.src = slidesEl.children[lbIndex].src; zoomed=false; lbImg.style.transform='translate(0,0) scale(1)'; }

  lbClose.addEventListener('click', closeLightbox);
  lbPrev.addEventListener('click', showPrev);
  lbNext.addEventListener('click', showNext);
  lb.addEventListener('click', (e)=> { if(e.target === lb || e.target === lbImg) closeLightbox(); });

  window.addEventListener('keydown', (e)=>{
    if(lb.style.display==='flex'){
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') showPrev();
      if(e.key === 'ArrowRight') showNext();
    }
  });

  // double-tap & pinch zoom
  let lastTap = 0;
  let startDist = 0;
  let lastX=0, lastY=0;
  lbImg.addEventListener('touchstart', function(e){
    if(e.touches && e.touches.length === 2){
      const dx = e.touches[0].clientX - e.touches[1].clientX;
      const dy = e.touches[0].clientY - e.touches[1].clientY;
      startDist = Math.hypot(dx,dy);
    } else if(e.touches && e.touches.length === 1){
      const now = Date.now();
      if(now - lastTap < 300){ toggleZoom(e.touches[0].clientX, e.touches[0].clientY); lastTap = 0; } else lastTap = now;
      lastX = e.touches[0].clientX; lastY = e.touches[0].clientY;
    }
  }, {passive:true});

  lbImg.addEventListener('touchmove', function(e){
    if(e.touches && e.touches.length === 2){
      const dx = e.touches[0].clientX - e.touches[1].clientX;
      const dy = e.touches[0].clientY - e.touches[1].clientY;
      const dist = Math.hypot(dx,dy);
      if(startDist > 0){
        const scale = Math.max(1, Math.min(3, (dist / startDist)));
        lbImg.style.transform = `translate(0,0) scale(${scale})`;
        zoomed = scale > 1.05;
      }
    } else if(e.touches && e.touches.length === 1 && zoomed){
      e.preventDefault();
      const nx = e.touches[0].clientX;
      const ny = e.touches[0].clientY;
      const dx = nx - lastX;
      const dy = ny - lastY;
      const cur = lbImg.style.transform || 'translate(0,0) scale(1)';
      const m = cur.match(/translate\((-?\d+)px,(-?\d+)px\)/);
      let tx = 0, ty = 0;
      if(m){ tx = parseFloat(m[1]); ty = parseFloat(m[2]); }
      tx += dx; ty += dy;
      lbImg.style.transform = `translate(${tx}px,${ty}px) scale(${zoomed?2:1})`;
      lastX = nx; lastY = ny;
    }
  }, {passive:false});

  lbImg.addEventListener('touchend', function(e){ startDist = 0; });
  lbImg.addEventListener('dblclick', ()=> toggleZoom());
  function toggleZoom(){ if(!zoomed){ lbImg.style.transform = 'translate(0,0) scale(2)'; zoomed=true; } else { lbImg.style.transform = 'translate(0,0) scale(1)'; zoomed=false; } }

  // --- chat assistant code (EN + GU) ---
  const langSelect = document.getElementById('langSelect');
  let lang = 'en';
  langSelect.addEventListener('change', ()=> {
    lang = langSelect.value || 'en';
    document.getElementById('panelSub').textContent = (lang === 'en' ? 'Tap mic or type your question' : '‡™Æ‡™æ‡™á‡™ï ‡™¶‡™¨‡™æ‡™µ‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™≤‡™ñ‡´ã');
  });

  const panel = document.getElementById('panel');
  const messagesEl = document.getElementById('messages');
  const inputBox = document.getElementById('inputBox');
  const sendBtn = document.getElementById('sendBtn');
  const micBtn = document.getElementById('micBtn');

  function openPanel(){ panel.style.display='flex'; panel.setAttribute('aria-hidden','false'); setTimeout(()=> { inputBox.focus(); scrollMessagesToBottom(); }, 120); }
  function closePanel(){ panel.style.display='none'; panel.setAttribute('aria-hidden','true'); deactivateListeningUI(); }
  document.getElementById('closePanel').addEventListener('click', closePanel);
  document.getElementById('askBtn').addEventListener('click', ()=>{ openPanel(); inputBox.focus(); });
  document.getElementById('assistBtn').addEventListener('click', ()=>{ openPanel(); setTimeout(()=> micBtn.click(),220); });

  function pushMessage(text, who='bot'){
    if(!text) return;
    const el = document.createElement('div'); el.className = 'bubble ' + (who==='user' ? 'user' : 'bot'); el.textContent = text;
    messagesEl.appendChild(el); scrollMessagesToBottom();
  }

  // ---------- expanded prompts (TV-focused) ----------
  const PROMPTS = [
    { q:/(\bprice\b|\bcost\b|‚Çπ|rupee|‡™¶‡™æ‡™Æ|‡™ï‡™ø‡™Ç‡™Æ‡™§|‡™ï‡™ø‡™Ç‡™Æ‡™§‡´ã)/i, en:'The 43-inch TCL P6K is priced at ‚Çπ35,000 in our showroom (approx). EMI & exchange options available in store.', gu:'‡™Ü 43\" TCL P6K ‡™ü‡´Ä‡™µ‡´Ä‡™®‡´ã ‡™Ö‡™Ç‡™¶‡™æ‡™ú‡™ø‡™§ ‡™≠‡™æ‡™µ ‚Çπ35,000 ‡™õ‡´á. EMI ‡™Ö‡™®‡´á ‡™è‡™ï‡´ç‡™∏‡™ö‡´á‡™®‡´ç‡™ú ‡™µ‡™ø‡™ï‡™≤‡´ç‡™™‡´ã ‡™∏‡´ç‡™ü‡´ã‡™∞ ‡™™‡™∞ ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™õ‡´á.' },
    { q:/(\bdimension|dimensions|size|height|width|depth|‡™Æ‡™æ‡™™|‡™ä‡™Ç‡™ö‡™æ‡™à|‡™™‡™π‡´ã‡™≥‡™æ‡™à|‡™ä‡™Ç‡™°‡™æ‡™à)/i, en:'Typical dimensions (with stand): W 83.8 cm √ó H 60.4 cm √ó D 18.45 cm. Wall-mount VESA pattern varies by model.', gu:'‡™∏‡´ç‡™ü‡´Ö‡™®‡´ç‡™° ‡™∏‡™æ‡™•‡´á ‡™Æ‡™æ‡™™ ‡™Ü‡™∂‡™∞‡´á: ‡™™‡™π‡´ã‡™≥‡™æ‡™à 83.8 ‡™∏‡´á‡™Æ‡´Ä √ó ‡™ä‡™Ç‡™ö‡™æ‡™à 60.4 ‡™∏‡´á‡™Æ‡´Ä √ó ‡™ä‡™Ç‡™°‡™æ‡™á 18.45 ‡™∏‡´á‡™Æ‡´Ä. VESA ‡™™‡´á‡™ü‡™∞‡´ç‡™® ‡™Æ‡´ã‡™°‡´á‡™≤ ‡™Æ‡´Å‡™ú‡™¨ ‡™¨‡™¶‡™≤‡™æ‡™Ø ‡™∂‡™ï‡´á ‡™õ‡´á.' },
    { q:/(\bfeature|features|spec|specs|‡™µ‡™ø‡™∂‡´á‡™∑‡™§‡™æ|‡™≤‡™ï‡´ç‡™∑‡™£|‡™´‡´Ä‡™ö‡™∞)/i, en:'Key features: 4K UHD, HDR10, Google TV, AiPQ processor, Dolby Audio, HDMI 2.1, MEMC for motion handling.', gu:'‡™Æ‡´Å‡™ñ‡´ç‡™Ø ‡™≤‡™ï‡´ç‡™∑‡™£‡´ã: 4K UHD, HDR10, Google TV, AiPQ ‡™™‡´ç‡™∞‡´ã‡™∏‡´á‡™∏‡™∞, Dolby Audio, HDMI 2.1 ‡™Ö‡™®‡´á MEMC.' },
    { q:/(\badvantage|advantages|benefit|why buy|‡™ï‡™æ‡™∞‡™£|‡™≤‡™æ‡™¨)/i, en:'Advantages: strong value for money, vivid 4K HDR colors, AiPQ upscaling, decent audio with Dolby, and Google TV platform for apps & casting.', gu:'‡™≤‡™æ‡™≠: ‡™ï‡™ø‡™Ç‡™Æ‡™§‡´á ‡™â‡™§‡´ç‡™§‡™Æ ‡™Æ‡´Ç‡™≤‡´ç‡™Ø, ‡™ú‡´ç‡™µ‡™≤‡™Ç‡™§ 4K HDR ‡™∞‡™Ç‡™ó‡´ã, AiPQ ‡™Ö‡™™‡™∏‡´ç‡™ï‡´á‡™≤‡™ø‡™Ç‡™ó, ‡™∏‡™æ‡™∞‡´ã ‡™ì‡™°‡™ø‡™Ø‡´ã ‡™Ö‡™®‡´á Google TV ‡™™‡´ç‡™≤‡´á‡™ü‡™´‡´ã‡™∞‡´ç‡™Æ.' },
    { q:/(\bwhy buy.*smaller|\bwhy choose.*smaller|\bchoose.*smaller|why buy this instead of a smaller)/i, en:'Choose 43\" for a noticeably larger, more cinematic viewing area ‚Äî better for living rooms and group viewing compared to smaller sizes.', gu:'43\" ‡™™‡™∏‡™Ç‡™¶ ‡™ï‡™∞‡™µ‡™æ‡™•‡´Ä ‡™Æ‡´ã‡™ü‡™æ ‡™Ö‡™®‡´á ‡™µ‡™ß‡´Å ‡™∏‡™ø‡™®‡´á‡™Æ‡´á‡™ü‡™ø‡™ï ‡™ú‡´ã‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á„Çπ„ÇØ‡´ç‡™∞‡´Ä‡™® ‡™Æ‡™≥‡´á ‡™õ‡´á ‚Äî ‡™≤‡™ø‡™µ‡™ø‡™Ç‡™ó ‡™∞‡´Ç‡™Æ ‡™Ö‡™®‡´á ‡™ú‡´Ç‡™• ‡™ú‡´ã‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á ‡™µ‡™ß‡´Å ‡™∏‡™æ‡™∞‡´ã.' },
    { q:/(\bbetter than other brands|how is it better|compare|compare with|‡™¨‡´Ä‡™ú‡™æ ‡™¨‡´ç‡™∞‡™æ‡™®‡´ç‡™°)/i, en:'Compared to competitors in the same price tier, this model offers good upscaling (AiPQ), HDR10 support and Google TV ‚Äî good value vs many other brands.', gu:'‡™∏‡™Æ‡™æ‡™® ‡™ï‡™ø‡™Ç‡™Æ‡™§‡´Ä ‡™∂‡´ç‡™∞‡´á‡™£‡´Ä‡™Æ‡™æ‡™Ç ‡™Ü ‡™Æ‡´ã‡™°‡´á‡™≤ ‡™∏‡™æ‡™∞‡´Ä ‡™Ö‡™™‡™∏‡´ç‡™ï‡´á‡™≤‡™ø‡™Ç‡™ó (AiPQ), HDR10 ‡™Ö‡™®‡´á Google TV ‡™Ü‡™™‡´á ‡™õ‡´á ‚Äî ‡™ò‡™£‡™æ ‡™¨‡´ç‡™∞‡™æ‡™®‡´ç‡™°‡™®‡´Ä ‡™∏‡™æ‡™Æ‡´á ‡™∏‡™æ‡™∞‡´Ä ‡™ï‡™ø‡™Ç‡™Æ‡™§.' },
    { q:/(\bmode|modes|movie mode|game mode|quick|eco|smart|apps|wifi|internet|voice)/i, en:'Display & smart: Movie, Game and Standard modes; Game Mode + ALLM reduces input lag. Google TV provides Play Store apps and Chromecast built-in.', gu:'‡™°‡™ø‡™∏‡´ç‡™™‡´ç‡™≤‡´á ‡™Ö‡™®‡´á ‡™∏‡´ç‡™Æ‡™æ‡™∞‡´ç‡™ü: Movie, Game ‡™Ö‡™®‡´á Standard ‡™Æ‡´ã‡™°; Game Mode ‡™Ö‡™®‡´á ALLM ‡™á‡™®‡™™‡´Å‡™ü ‡™≤‡´á‡™ó ‡™ò‡™ü‡™æ‡™°‡´á ‡™õ‡´á. Google TV ‡™™‡™∞ Play Store ‡™Ö‡™®‡´á Chromecast ‡™¨‡™ø‡™≤‡´ç‡™ü-‡™á‡™® ‡™õ‡´á.' },
    { q:/(\bbright room|sunlight|outdoor|brightness|daylight|contrast|screen)/i, en:'This panel performs well in normal indoor lighting; for very bright rooms a high-brightness model or anti-glare placement is recommended.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™á‡™Ç‡™°‡´ã‡™∞ ‡™≤‡™æ‡™á‡™ü‡™ø‡™Ç‡™ó‡™Æ‡™æ‡™Ç ‡™∏‡™æ‡™∞‡´Å‡™Ç ‡™™‡´ç‡™∞‡™¶‡™∞‡´ç‡™∂‡™®. ‡™ñ‡´Ç‡™¨ ‡™§‡´á‡™ú ‡™∞‡´Ç‡™Æ ‡™Æ‡™æ‡™ü‡´á ‡™µ‡™ß‡´Å ‡™¨‡´ç‡™∞‡™æ‡™á‡™ü‡™®‡´á‡™∏ ‡™Ö‡™•‡™µ‡™æ ‡™è‡™®‡´ç‡™ü‡´Ä-‡™ó‡´ç‡™≤‡´á‡™∞ ‡™∏‡´á‡™ü‡™Ö‡™™ ‡™≠‡™≤‡™æ‡™Æ‡™£ ‡™õ‡´á.' },
    { q:/(\bport|ports|hdmi|usb|ethernet|audio out|hdmi 2.1)/i, en:'Includes multiple HDMI ports (HDMI 2.1 on at least one port), USB, audio out and Ethernet ‚Äî exact count depends on the variant, check sticker or manual.', gu:'‡™ò‡™£‡™æ HDMI (‡™ò‡™ü‡™Æ‡™æ‡™Ç ‡™è‡™ï HDMI 2.1), USB, audio out ‡™Ö‡™®‡´á Ethernet ‡™π‡´ã‡™Ø ‡™õ‡´á ‚Äî ‡™ö‡´ã‡™ï‡´ç‡™ï‡™∏ ‡™∏‡™Ç‡™ñ‡´ç‡™Ø‡™æ ‡™Æ‡´ã‡™°‡´á‡™≤ ‡™Ö‡™®‡´Å‡™∏‡™æ‡™∞ ‡™¨‡™¶‡™≤‡™æ‡™Ø ‡™õ‡´á.' },
    { q:/(\bsound|audio|dolby|dolby audio|dolby atmos)/i, en:'Audio: Supports Dolby Audio for clearer sound. For immersive bass or louder volumes, consider a soundbar or external speaker.', gu:'‡™ì‡™°‡™ø‡™Ø‡´ã: Dolby Audio ‡™∏‡™™‡´ã‡™∞‡´ç‡™ü; ‡™µ‡™ß‡´Å ‡™¨‡™æ‡™∏ ‡™Æ‡™æ‡™ü‡´á ‡™∏‡™æ‡™â‡™®‡´ç‡™°‡™¨‡™æ‡™∞ ‡™∏‡´Ç‡™ö‡™µ‡´Ä‡™è ‡™õ‡´Ä‡™è.' },
    { q:/(\bwifi|wi-?fi|wireless|google tv|smart tv|apps|play store)/i, en:'Smart features: Google TV with Wi-Fi and built-in Chromecast for casting. Login with Google account to access Play Store apps.', gu:'‡™∏‡´ç‡™Æ‡™æ‡™∞‡´ç‡™ü ‡™´‡´Ä‡™ö‡™∞‡´ç‡™∏: Google TV, Wi-Fi ‡™Ö‡™®‡´á ‡™¨‡™ø‡™≤‡´ç‡™ü-‡™á‡™® Chromecast. Google ‡™è‡™ï‡™æ‡™â‡™®‡´ç‡™ü‡™•‡´Ä Play Store ‡™è‡™™‡´ç‡™∏ ‡™Æ‡´á‡™≥‡™µ‡´Ä ‡™∂‡™ï‡´ã ‡™õ‡´ã.' },
    { q:/(\bwarranty|guarantee|service|‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä|‡™∏‡™∞‡´ç‡™µ‡™ø‡™∏)/i, en:'Usually comes with 1 year manufacturer warranty; extended warranty options may be offered in store.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™∞‡´Ä‡™§‡´á 1 ‡™µ‡™∞‡´ç‡™∑‡™®‡´Å‡™Ç ‡™Æ‡´á‡™®‡´ç‡™Ø‡´Å‡™´‡´á‡™ï‡´ç‡™ö‡™∞‡™∞ ‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä ‡™Æ‡™≥‡´á ‡™õ‡´á; ‡™∏‡´ç‡™ü‡´ã‡™∞‡™Æ‡™æ‡™Ç ‡™µ‡™ß‡™æ‡™∞‡™æ‡™®‡´Ä ‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä ‡™â‡™™‡™≤‡™¨‡´ç‡™ß ‡™π‡´ã‡™à ‡™∂‡™ï‡´á ‡™õ‡´á.' },
    { q:/(\bpower|watt|consumption|energy|‡™µ‡´ã‡™ü|‡™µ‡´Ä‡™ú)/i, en:'Typical power usage ~70‚Äì110W while operating; standby consumption is very low (<0.5W). Exact numbers vary by brightness and settings.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™µ‡´Ä‡™ú ‡™â‡™™‡™≠‡´ã‡™ó ~70‚Äì110W; ‡™∏‡´ç‡™ü‡´á‡™®‡´ç‡™°‡™¨‡™æ‡™Ø <0.5W. ‡™ö‡´ã‡™ï‡´ç‡™ï‡™∏ ‡™Ü‡™Ç‡™ï‡™°‡™æ ‡™∏‡´á‡™ü‡™ø‡™Ç‡™ó‡´ç‡™∏ ‡™™‡´ç‡™∞‡™Æ‡™æ‡™£‡´á ‡™¨‡™¶‡™≤‡™æ‡™Ø ‡™õ‡´á.' },
    { q:/(\bwall|wall-mount|mount|vesa|‡™µ‡´ã‡™≤)/i, en:'Yes, the TV supports wall-mounting; check the VESA pattern on the back or in manual and buy a compatible bracket.', gu:'‡™π‡™æ, ‡™µ‡´ã‡™≤-‡™Æ‡™æ‡™â‡™®‡´ç‡™ü ‡™∏‡™™‡´ã‡™∞‡´ç‡™ü ‡™õ‡´á; VESA ‡™™‡´á‡™ü‡™∞‡´ç‡™® ‡™ö‡™ï‡™æ‡™∏‡´ã ‡™Ö‡™®‡´á ‡™Ø‡´ã‡™ó‡´ç‡™Ø ‡™¨‡´ç‡™∞‡´á‡™ï‡´á‡™ü ‡™ñ‡™∞‡´Ä‡™¶‡´ã.' },
    { q:/(\breview|reviews|rating|customer feedback|‡™™‡´ç‡™∞‡™§‡™ø‡™∏‡™æ‡™¶|‡™∏‡™Æ‡´Ä‡™ï‡´ç‡™∑‡™æ)/i, en:'Common customer feedback: good picture quality for price, reliable Google TV experience; some users mention moderate peak brightness in very bright rooms.', gu:'‡™ó‡´ç‡™∞‡™æ‡™π‡™ï‡´ã ‡™ï‡™π‡´á ‡™õ‡´á: ‡™ï‡™ø‡™Ç‡™Æ‡™§ ‡™Æ‡™æ‡™ü‡´á ‡™∏‡™æ‡™∞‡´Ä ‡™™‡™ø‡™ï‡´ç‡™ö‡™∞ ‡™ï‡´ç‡™µ‡™æ‡™≤‡™ø‡™ü‡´Ä ‡™Ö‡™®‡´á ‡™µ‡™ø‡™∂‡´ç‡™µ‡™∏‡™®‡´Ä‡™Ø Google TV; ‡™ï‡´á‡™ü‡™≤‡™æ‡™ï‡´á ‡™ñ‡´Ç‡™¨ ‡™§‡´á‡™ú ‡™∞‡´Ç‡™Æ‡™Æ‡™æ‡™Ç ‡™™‡´Ä‡™ï ‡™¨‡´ç‡™∞‡™æ‡™á‡™ü‡™®‡´á‡™∏ ‡™®‡´ã‡™Ç‡™ß‡´ç‡™Ø‡´Å‡™Ç.' },
    { q:/(\bcolor|colour|available color|‡™∞‡™Ç‡™ó)/i, en:'Usually available in black/graphite finish; color availability depends on retailer stock and region.', gu:'‡™∏‡™æ‡™Æ‡™æ‡™®‡´ç‡™Ø ‡™∞‡´Ä‡™§‡´á ‡™ï‡™æ‡™≥‡™æ/‡™ó‡´ç‡™∞‡´ã‡™´‡™æ‡™á‡™ü ‡™´‡™ø‡™®‡™ø‡™∂‡™Æ‡™æ‡™Ç ‡™Æ‡™≥‡´á ‡™õ‡´á; ‡™∞‡™Ç‡™ó ‡™∏‡´ç‡™ü‡´ã‡™ï ‡™™‡™∞ ‡™®‡™ø‡™∞‡´ç‡™≠‡™∞ ‡™õ‡´á.' },
    { q:/.*/, en:'Sorry ‚Äî please ask about price, dimensions, features, display, ports, power or warranty.', gu:'‡™Æ‡™æ‡™´ ‡™ï‡™∞‡™∂‡´ã ‚Äî ‡™ï‡´É‡™™‡™æ ‡™ï‡™∞‡´Ä‡™®‡´á ‡™ï‡™ø‡™Ç‡™Æ‡™§, ‡™Æ‡™æ‡™™, ‡™≤‡™ï‡´ç‡™∑‡™£‡´ã, ‡™°‡™ø‡™∏‡´ç‡™™‡´ç‡™≤‡´á ‡™Ö‡™•‡™µ‡™æ ‡™µ‡´ã‡™∞‡™Ç‡™ü‡´Ä ‡™µ‡™ø‡™∂‡´á ‡™™‡´Ç‡™õ‡´ã.' }
  ];

  function findAnswer(text){
    for(const p of PROMPTS) if(p.q.test(text)) return (lang === 'en' ? p.en : p.gu);
    return (lang === 'en' ? PROMPTS[PROMPTS.length-1].en : PROMPTS[PROMPTS.length-1].gu);
  }

  // send events
  sendBtn.addEventListener('click', function(){
    const v = inputBox.value && inputBox.value.trim();
    if(!v) return;
    inputBox.value = '';
    pushMessage(v,'user');
    const ans = findAnswer(v);
    setTimeout(()=> { pushMessage(ans,'bot'); speak(ans); }, 160);
  });
  inputBox.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); sendBtn.click(); } });

  // speech recognition & banner
  let recognition = null, listening=false;
  function activateListeningUI(){ document.getElementById('listeningBanner').style.display='flex'; document.getElementById('listeningBanner').classList.add('active'); document.getElementById('listeningText').textContent = (lang==='en'?'Listening...':'‡™∏‡´Å‡™®‡™æ‡™à ‡™∞‡™π‡´ç‡™Ø‡´Å‡™Ç ‡™õ‡´á...'); document.getElementById('panelSub').textContent = document.getElementById('listeningText').textContent; }
  function deactivateListeningUI(){ document.getElementById('listeningBanner').classList.remove('active'); document.getElementById('listeningBanner').style.display='none'; document.getElementById('panelSub').textContent = (lang==='en'?'Tap mic or type your question':'‡™Æ‡™æ‡™á‡™ï ‡™¶‡™¨‡™æ‡™µ‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™≤‡™ñ‡´ã'); }

  if(window.SpeechRecognition || window.webkitSpeechRecognition){
    recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.interimResults = false; recognition.maxAlternatives = 1;
    recognition.onstart = function(){ listening=true; activateListeningUI(); micBtn.textContent='‚óè'; micBtn.style.transform='scale(1.03)'; micBtn.style.boxShadow='0 8px 28px rgba(255,122,90,0.12)'; };
    recognition.onresult = function(e){
      const txt = (e.results && e.results[0] && e.results[0][0] && e.results[0][0].transcript) || '';
      if(txt){
        pushMessage(txt,'user');
        const ans = findAnswer(txt);
        setTimeout(()=> { pushMessage(ans,'bot'); speak(ans); }, 160);
      }
    };
    recognition.onend = function(){ listening=false; deactivateListeningUI(); micBtn.textContent='üé§'; micBtn.style.transform=''; micBtn.style.boxShadow=''; };
    recognition.onerror = function(){ listening=false; deactivateListeningUI(); micBtn.textContent='üé§'; micBtn.style.transform=''; micBtn.style.boxShadow=''; };
  }

  micBtn.addEventListener('click', function(){
    if(!recognition){ alert(lang==='en' ? 'Speech recognition not supported in this browser.' : '‡™Ü ‡™¨‡´ç‡™∞‡™æ‡™â‡™ù‡™∞ ‡™Æ‡™æ‡™Ç ‡™∏‡´ç‡™™‡´Ä‡™ö ‡™∞‡´á‡™ï‡´ã‡™ó‡´ç‡™®‡™ø‡™∂‡™® ‡™∏‡™™‡´ã‡™∞‡´ç‡™ü ‡™®‡™•‡´Ä.'); return; }
    if(!listening){ try{ recognition.lang = (lang === 'en' ? 'en-IN' : 'gu-IN'); recognition.start(); }catch(e){} }
    else { try{ recognition.stop(); }catch(e){} }
  });

  // speech output
  function speak(text){
    if(!('speechSynthesis' in window)) return;
    try{
      const u = new SpeechSynthesisUtterance(text);
      u.lang = (lang === 'en' ? 'en-IN' : 'gu-IN');
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }catch(e){}
  }

  // keyboard handling
  function scrollMessagesToBottom(){ try{ messagesEl.scrollTop = messagesEl.scrollHeight; }catch(e){} }
  const panelEl = document.getElementById('panel');
  if(window.visualViewport){
    let lastH = window.visualViewport.height;
    window.visualViewport.addEventListener('resize', ()=> {
      const vh = window.visualViewport.height;
      const dh = window.innerHeight - vh;
      if(vh < lastH - 50) panelEl.style.transform = `translateY(-${dh}px)`;
      else panelEl.style.transform = '';
      lastH = vh; setTimeout(scrollMessagesToBottom,200);
    });
    inputBox.addEventListener('focus', ()=> setTimeout(()=> { panelEl.style.transform=''; scrollMessagesToBottom(); },200));
  } else {
    let lastInner = window.innerHeight;
    window.addEventListener('resize', ()=> {
      const now = window.innerHeight;
      if(now < lastInner - 80) panelEl.style.transform = 'translateY(-160px)';
      else panelEl.style.transform = '';
      lastInner = now;
    });
  }

  // initial message
  setTimeout(()=> pushMessage(lang==='en' ? 'Hello ‚Äî tap Product Assistant for voice or Ask Me to type a question.' : '‡™π‡´á‡™≤‡´ã ‚Äî ‡™Ö‡™µ‡™æ‡™ú ‡™Æ‡™æ‡™ü‡´á Product Assistant ‡™¶‡™¨‡™æ‡™µ‡´ã ‡™Ö‡™•‡™µ‡™æ ‡™≤‡™ñ‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á Ask Me ‡™¶‡™¨‡™æ‡™µ‡´ã.'), 450);

  // ensure touchscreen behaviour
  ['prevBtn','nextBtn','askBtn','assistBtn','langSelect','micBtn','sendBtn'].forEach(id=>{ const el = document.getElementById(id); if(el) el.style.touchAction='manipulation'; });

}); // DOM load
</script>
</body>
</html>
